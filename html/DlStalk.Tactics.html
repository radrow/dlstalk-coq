<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>DlStalk.Tactics</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library DlStalk.Tactics</h1>

<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Program.Equality.html#"><span class="id" title="library">Coq.Program.Equality</span></a>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.micromega.Lia.html#"><span class="id" title="library">Lia</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#"><span class="id" title="library">Lists.List</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Bool.Bool.html#"><span class="id" title="library">Bool</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Strings.String.html#"><span class="id" title="library">String</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Structures.Equalities.html#"><span class="id" title="library">Structures.Equalities</span></a>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Ltac2</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Ltac2</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Ltac2</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Std</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Ltac2</span> <span class="id" title="keyword">Require</span> <span class="id" title="library">Fresh</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Ltac2</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Control</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Ltac2</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Message</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Ltac2</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Std</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Ltac2</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Printf</span>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="module">Ltac2.Notations</span>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#ListNotations"><span class="id" title="module">ListNotations</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Bool.Bool.html#BoolNotations"><span class="id" title="module">BoolNotations</span></a>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">print_kind</span> <span class="id" title="var">c</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">Constr.Unsafe.kind</span> <span class="id" title="var">c</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">Constr.Unsafe.Rel</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">printf</span> "rel"<br/>
&nbsp;&nbsp;| <span class="id" title="var">Constr.Unsafe.Var</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">printf</span> "var"<br/>
&nbsp;&nbsp;| <span class="id" title="var">Constr.Unsafe.Meta</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">printf</span> "meta"<br/>
&nbsp;&nbsp;| <span class="id" title="var">Constr.Unsafe.Evar</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">printf</span> "evar"<br/>
&nbsp;&nbsp;| <span class="id" title="var">Constr.Unsafe.Sort</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">printf</span> "sort"<br/>
&nbsp;&nbsp;| <span class="id" title="var">Constr.Unsafe.Cast</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">printf</span> "cast"<br/>
&nbsp;&nbsp;| <span class="id" title="var">Constr.Unsafe.Prod</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">printf</span> "prod"<br/>
&nbsp;&nbsp;| <span class="id" title="var">Constr.Unsafe.Lambda</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">printf</span> "lambda"<br/>
&nbsp;&nbsp;| <span class="id" title="var">Constr.Unsafe.LetIn</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>  <span class="id" title="var">_</span> ⇒ <span class="id" title="var">printf</span> "letin"<br/>
&nbsp;&nbsp;| <span class="id" title="var">Constr.Unsafe.App</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">printf</span> "app"<br/>
&nbsp;&nbsp;| <span class="id" title="var">Constr.Unsafe.Constant</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">printf</span> "constant"<br/>
&nbsp;&nbsp;| <span class="id" title="var">Constr.Unsafe.Ind</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">printf</span> "ind"<br/>
&nbsp;&nbsp;| <span class="id" title="var">Constr.Unsafe.Constructor</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">printf</span> "constructor"<br/>
&nbsp;&nbsp;| <span class="id" title="var">Constr.Unsafe.Case</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">printf</span> "case"<br/>
&nbsp;&nbsp;| <span class="id" title="var">Constr.Unsafe.Fix</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">printf</span> "fix"<br/>
&nbsp;&nbsp;| <span class="id" title="var">Constr.Unsafe.CoFix</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">printf</span> "cofix"<br/>
&nbsp;&nbsp;| <span class="id" title="var">Constr.Unsafe.Proj</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">printf</span> "proj"<br/>
&nbsp;&nbsp;| <span class="id" title="var">Constr.Unsafe.Uint63</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">printf</span> "uint63"<br/>
&nbsp;&nbsp;| <span class="id" title="var">Constr.Unsafe.Float</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">printf</span> "float"<br/>
&nbsp;&nbsp;| <span class="id" title="var">Constr.Unsafe.Array</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">printf</span> "array"<br/>
&nbsp;&nbsp;| <span class="id" title="var">Constr.Unsafe.String</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">printf</span> "String"<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Unshelves all evars that arose due to an existential tactic 
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">unshelve</span> <span class="id" title="var">tac</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">result</span> := { <span class="id" title="var">contents</span> := (<span class="id" title="keyword">fun</span> () ⇒ <span class="id" title="var">Control.throw</span> <span class="id" title="var">Not_found</span>) } <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">f</span> := <span class="id" title="var">ltac1</span>:(<span class="id" title="var">tac</span> |- <span class="id" title="var">unshelve</span> (<span class="id" title="var">tac</span> ())) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> () := <span class="id" title="var">f</span> (<span class="id" title="var">Ltac1.lambda</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="keyword">let</span> <span class="id" title="var">res</span> := <span class="id" title="var">tac</span> () <span class="id" title="tactic">in</span> (<span class="id" title="var">result</span>.(<span class="id" title="var">contents</span>) := <span class="id" title="keyword">fun</span> () ⇒ <span class="id" title="var">res</span>); <span class="id" title="var">ltac1val</span>:(<span class="id" title="tactic">idtac</span>))) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">result</span>.(<span class="id" title="var">contents</span>) ().<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">Notation</span> "unshelve" <span class="id" title="var">t</span>(<span class="id" title="var">thunk</span>(<span class="id" title="var">tactic</span>)) := <span class="id" title="var">unshelve</span> (<span class="id" title="var">t</span>); <span class="id" title="tactic">auto</span>.<br/>

<br/>
<span class="id" title="keyword">Local Ltac</span>2 <span class="id" title="var">replace_in</span> (<span class="id" title="var">lhs</span>: <span class="id" title="keyword">constr</span>) (<span class="id" title="var">rhs</span>: <span class="id" title="keyword">constr</span>) (<span class="id" title="var">in_</span> : <span class="id" title="var">ident</span> <span class="id" title="var">option</span>) <span class="id" title="var">solver</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">in_</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">None</span> ⇒ <span class="id" title="var">ltac1</span>:(<span class="id" title="var">lhs</span> <span class="id" title="var">rhs</span> |- <span class="id" title="tactic">replace</span> <span class="id" title="var">lhs</span> <span class="id" title="keyword">with</span> <span class="id" title="var">rhs</span> <span class="id" title="tactic">in</span> × )<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Ltac1.of_constr</span> <span class="id" title="var">lhs</span>) (<span class="id" title="var">Ltac1.of_constr</span> <span class="id" title="var">rhs</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">Some</span> <span class="id" title="var">in_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ltac1</span>:(<span class="id" title="var">lhs</span> <span class="id" title="var">rhs</span> <span class="id" title="var">h</span> |- <span class="id" title="tactic">replace</span> <span class="id" title="var">lhs</span> <span class="id" title="keyword">with</span> <span class="id" title="var">rhs</span> <span class="id" title="tactic">in</span> <span class="id" title="var">h</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Ltac1.of_constr</span> <span class="id" title="var">lhs</span>) (<span class="id" title="var">Ltac1.of_constr</span> <span class="id" title="var">rhs</span>) (<span class="id" title="var">Ltac1.of_ident</span> <span class="id" title="var">in_</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span> &gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[ | <span class="id" title="keyword">match</span> <span class="id" title="var">solver</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">None</span> ⇒ ()<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Some</span> <span class="id" title="var">solver</span> ⇒ <span class="id" title="tactic">solve</span> [<span class="id" title="var">solver</span> ()]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;].<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">Notation</span> "replace"<br/>
&nbsp;&nbsp;<span class="id" title="var">lhs</span>(<span class="id" title="var">open_constr</span>) "with" <span class="id" title="var">rhs</span>(<span class="id" title="keyword">constr</span>)<br/>
&nbsp;&nbsp;<span class="id" title="var">h</span>(<span class="id" title="var">opt</span>(<span class="id" title="var">seq</span>("in", <span class="id" title="var">ident</span>)))<br/>
&nbsp;&nbsp;<span class="id" title="var">s</span>(<span class="id" title="var">opt</span>(<span class="id" title="var">seq</span>("by", <span class="id" title="var">thunk</span>(<span class="id" title="var">tactic</span>))))<br/>
&nbsp;&nbsp;:= <span class="id" title="var">replace_in</span> <span class="id" title="var">lhs</span> <span class="id" title="var">rhs</span> <span class="id" title="var">h</span> <span class="id" title="var">s</span>.<br/>

<br/>

<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">smart_inv</span> <span class="id" title="var">h</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">destr</span> () :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">h0</span> := <span class="id" title="var">hyp</span> <span class="id" title="var">h</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">t</span> := <span class="id" title="var">Constr.type</span> <span class="id" title="var">h0</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">t_old</span> := (<span class="id" title="tactic">eval</span> <span class="id" title="tactic">cbv</span> <span class="id" title="tactic">in</span> $<span class="id" title="var">t</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">cleanup</span> () :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">h1</span> := <span class="id" title="var">hyp</span> <span class="id" title="var">h</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">t</span> := <span class="id" title="var">Constr.type</span> <span class="id" title="var">h1</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">t_new</span> := (<span class="id" title="tactic">eval</span> <span class="id" title="tactic">cbv</span> <span class="id" title="tactic">in</span> $<span class="id" title="var">t</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="var">Constr.equal</span> <span class="id" title="var">t_old</span> <span class="id" title="var">t_new</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <span class="id" title="tactic">clear</span> $<span class="id" title="var">h</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> ()<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ltac1</span>:(<span class="id" title="var">h</span> |- <span class="id" title="tactic">inversion</span> <span class="id" title="var">h</span> <span class="id" title="keyword">as</span> []) (<span class="id" title="var">Ltac1.of_constr</span> <span class="id" title="var">h0</span>); <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Control.enter</span> <span class="id" title="var">cleanup</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">Control.enter</span> <span class="id" title="var">destr</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">congruence_</span> () := <span class="id" title="var">ltac1</span>:(<span class="id" title="tactic">congruence</span>).<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">Notation</span> "congruence" := <span class="id" title="var">congruence_</span> ().<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">Notation</span> "contradiction" <span class="id" title="var">c</span>(<span class="id" title="var">opt</span>(<span class="id" title="var">seq</span>(<span class="id" title="keyword">constr</span>, <span class="id" title="var">bindings</span>))) :=  <span class="id" title="var">contradiction</span> <span class="id" title="var">c</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">Notation</span> "rename" <span class="id" title="var">i</span>(<span class="id" title="var">ident</span>) "into" <span class="id" title="var">n</span>(<span class="id" title="var">ident</span>) := <span class="id" title="tactic">rename</span> [(<span class="id" title="var">i</span>, <span class="id" title="var">n</span>)].<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">exfalso_</span> () := <span class="id" title="var">ltac1</span>:(<span class="id" title="var">exfalso</span>).<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">Notation</span> "exfalso" := <span class="id" title="var">exfalso_</span> ().<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">kill</span> <span class="id" title="var">h</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">smart_inv</span> <span class="id" title="var">h</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">congruence</span>); <span class="id" title="tactic">try</span> (<span class="id" title="var">contradiction</span>).<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">Notation</span> "kill" <span class="id" title="var">h</span>(<span class="id" title="var">ident</span>) := <span class="id" title="var">kill</span> <span class="id" title="var">h</span>.<br/>

<br/>
</div>

<div class="doc">
src: https://github.com/coq/coq/issues/10095 
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">get_n_constructors</span> (<span class="id" title="var">n</span> : <span class="id" title="var">int</span>) (<span class="id" title="var">ind</span> : <span class="id" title="var">inductive</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">List.map</span> (<span class="id" title="var">Constr.Unsafe.constructor</span> <span class="id" title="var">ind</span>) (<span class="id" title="var">List.seq</span> 0 1 <span class="id" title="var">n</span>).<br/>

<br/>
</div>

<div class="doc">
src: https://github.com/coq/coq/issues/10095 
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">count_constructors</span> (<span class="id" title="var">ty</span> : <span class="id" title="keyword">constr</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">c</span> := '(<span class="id" title="keyword">fun</span> <a id="n:1" class="idref" href="#n:1"><span class="id" title="binder">n</span></a> : $<span class="id" title="var">ty</span> ⇒ <span class="id" title="keyword">ltac</span>:(<span class="id" title="keyword">lazymatch</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> <span class="id" title="var">n</span> : <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span> <span class="id" title="keyword">end</span>; <span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>)) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">Constr.Unsafe.kind</span> <span class="id" title="var">c</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">Constr.Unsafe.Lambda</span> <span class="id" title="var">_</span> <span class="id" title="var">c</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;⇒ <span class="id" title="keyword">match</span> <span class="id" title="var">Constr.Unsafe.kind</span> <span class="id" title="var">c</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Constr.Unsafe.Case</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">cases</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;⇒ <span class="id" title="var">Array.length</span> <span class="id" title="var">cases</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="var">Control.throw</span> (<span class="id" title="var">Tactic_failure</span> (<span class="id" title="var">Some</span> (<span class="id" title="var">Message.of_constr</span> <span class="id" title="var">c</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="var">Control.throw</span> (<span class="id" title="var">Tactic_failure</span> (<span class="id" title="var">Some</span> (<span class="id" title="var">Message.of_constr</span> <span class="id" title="var">c</span>)))<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
src: https://github.com/coq/coq/issues/10095 
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">rec</span> <span class="id" title="var">head</span> <span class="id" title="var">v</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span>! <span class="id" title="var">v</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| ?<span class="id" title="var">f</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">head</span> <span class="id" title="var">f</span><br/>
&nbsp;&nbsp;| ?<span class="id" title="var">x</span> ⇒ <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
src: https://github.com/coq/coq/issues/10095 
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">constructors_of_type</span> <span class="id" title="var">ty</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">t</span> := <span class="id" title="var">head</span> <span class="id" title="var">ty</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">Constr.Unsafe.kind</span> <span class="id" title="var">t</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">Constr.Unsafe.Ind</span> <span class="id" title="var">ind</span> <span class="id" title="var">inst</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;⇒ <span class="id" title="keyword">let</span> <span class="id" title="var">n</span> := <span class="id" title="var">count_constructors</span> <span class="id" title="var">ty</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ls</span> := <span class="id" title="var">get_n_constructors</span> <span class="id" title="var">n</span> <span class="id" title="var">ind</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">List.map</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">c</span> ⇒ <span class="id" title="var">Constr.Unsafe.make</span> (<span class="id" title="var">Constr.Unsafe.Constructor</span> <span class="id" title="var">c</span> <span class="id" title="var">inst</span>)) <span class="id" title="var">ls</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="var">Control.throw</span> (<span class="id" title="var">Tactic_failure</span> (<span class="id" title="var">Some</span> (<span class="id" title="var">Message.of_constr</span> <span class="id" title="var">t</span>)))<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">split_app</span> <span class="id" title="var">c</span> : <span class="id" title="keyword">constr</span> × <span class="id" title="keyword">constr</span> <span class="id" title="var">list</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">rec</span> <span class="id" title="var">go</span> <span class="id" title="var">c</span> <span class="id" title="var">acc</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lazy_match</span>! <span class="id" title="var">c</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| ?<span class="id" title="var">f</span> ?<span class="id" title="var">a</span> ⇒ <span class="id" title="var">go</span> <span class="id" title="var">f</span> (<span class="id" title="var">a</span>::<span class="id" title="var">acc</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ (<span class="id" title="var">c</span>, <span class="id" title="var">acc</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">go</span> <span class="id" title="var">c</span> [].<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">rec</span> <span class="id" title="var">get_left_app</span> <span class="id" title="var">c</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">lazy_match</span>! <span class="id" title="var">c</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| ?<span class="id" title="var">f</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">get_left_app</span> <span class="id" title="var">f</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="var">c</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">is_constructor_app</span> <span class="id" title="var">c</span> := <span class="id" title="var">Constr.is_constructor</span> (<span class="id" title="var">get_left_app</span> <span class="id" title="var">c</span>).<br/>

<br/>
</div>

<div class="doc">
Better discriminate 
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">rec</span> <span class="id" title="var">disc_</span> () :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span>! <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">h</span> : ?<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">y</span> |- <span class="id" title="var">_</span>] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span>! '($<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> $<span class="id" title="var">y</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">solve</span> [<span class="id" title="var">ltac1</span>:(<span class="id" title="var">h</span> |- <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">h</span>) (<span class="id" title="var">Ltac1.of_ident</span> <span class="id" title="var">h</span>)]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">solve</span> [<span class="id" title="var">ltac1</span>:(<span class="id" title="var">h</span> |- <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">h</span>) (<span class="id" title="var">Ltac1.of_ident</span> <span class="id" title="var">h</span>)]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ ()<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">hh</span> := <span class="id" title="var">hyp</span> <span class="id" title="var">h</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="var">Constr.is_constructor</span>  (<span class="id" title="var">get_left_app</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> (<span class="id" title="keyword">if</span> <span class="id" title="var">Constr.is_constructor</span> (<span class="id" title="var">get_left_app</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> (<span class="id" title="tactic">injection</span> $<span class="id" title="var">hh</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> $<span class="id" title="var">h</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">disc_</span> ()<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="keyword">if</span> <span class="id" title="var">Constr.is_var</span> <span class="id" title="var">y</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;( <span class="id" title="var">ltac1</span>:(<span class="id" title="var">exfalso</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> $<span class="id" title="var">y</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ltac1</span>:(<span class="id" title="tactic">congruence</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="tactic">discriminate</span> $<span class="id" title="var">hh</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="keyword">if</span> <span class="id" title="var">Constr.is_var</span> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> <span class="id" title="tactic">in</span> $<span class="id" title="var">h</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">disc_</span> ()<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="tactic">discriminate</span> $<span class="id" title="var">hh</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">Notation</span> "disc" := <span class="id" title="var">Control.enter</span> <span class="id" title="var">disc_</span>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="HAVE" class="idref" href="#HAVE"><span class="id" title="definition, inductive"><span id="HAVE_rect" class="id"><span id="HAVE_ind" class="id"><span id="HAVE_rec" class="id"><span id="HAVE_sind" class="id">HAVE</span></span></span></span></span></a> (<a id="P:2" class="idref" href="#P:2"><span class="id" title="binder">P</span></a> : <span class="id" title="keyword">Prop</span>) := <a id="HAVE_" class="idref" href="#HAVE_"><span class="id" title="constructor">HAVE_</span></a> : <a class="idref" href="DlStalk.Tactics.html#P:2"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="DlStalk.Tactics.html#HAVE:3"><span class="id" title="inductive">HAVE</span></a> <a class="idref" href="DlStalk.Tactics.html#P:2"><span class="id" title="variable">P</span></a>.<br/>
<span class="id" title="keyword">Notation</span> <a id="98d3d9d5b93ce83b7c2abc85c9f83192" class="idref" href="#98d3d9d5b93ce83b7c2abc85c9f83192"><span class="id" title="notation">&quot;</span></a>### P" := (<a class="idref" href="DlStalk.Tactics.html#HAVE"><span class="id" title="inductive">HAVE</span></a> <span class="id" title="var">P</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 200) : <span class="id" title="var">type_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="HAVE_inv" class="idref" href="#HAVE_inv"><span class="id" title="lemma">HAVE_inv</span></a> : <span class="id" title="keyword">∀</span> <a id="P:5" class="idref" href="#P:5"><span class="id" title="binder">P</span></a>, <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="DlStalk.Tactics.html#98d3d9d5b93ce83b7c2abc85c9f83192"><span class="id" title="notation">###</span></a> <a class="idref" href="DlStalk.Tactics.html#P:5"><span class="id" title="variable">P</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="DlStalk.Tactics.html#P:5"><span class="id" title="variable">P</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">eauto</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">re_have_</span> (<span class="id" title="var">f</span> : <span class="id" title="var">unit</span> → <span class="id" title="var">unit</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">havs</span> := <span class="id" title="var">List.map_filter</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> (<span class="id" title="var">h</span>, <span class="id" title="var">_v</span>, <span class="id" title="var">t</span>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">hh</span> := <span class="id" title="var">hyp</span> <span class="id" title="var">h</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">h'</span> := <span class="id" title="var">Fresh.in_goal</span> <span class="id" title="var">h</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span>! <span class="id" title="var">t</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DlStalk.Tactics.html#HAVE"><span class="id" title="inductive">HAVE</span></a> ?<span class="id" title="var">t'</span> ⇒ <span class="id" title="tactic">assert</span> $<span class="id" title="var">t'</span> <span class="id" title="keyword">as</span> $<span class="id" title="var">h'</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">destruct</span> $<span class="id" title="var">hh</span>; <span class="id" title="tactic">assumption</span>); <span class="id" title="var">Some</span> <span class="id" title="var">h'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="var">None</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Control.hyps</span> ())<br/>
&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="var">f</span> ();<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">List.iter</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">h</span> ⇒ <span class="id" title="tactic">clear</span> $<span class="id" title="var">h</span>) <span class="id" title="var">havs</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;().<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">Notation</span> "re_have" <span class="id" title="var">t</span>(<span class="id" title="var">thunk</span>(<span class="id" title="var">tactic</span>)) := <span class="id" title="var">Control.enter</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">re_have_</span> <span class="id" title="var">t</span>).<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">spank</span> () := <span class="id" title="tactic">solve</span> [<span class="id" title="var">re_have</span> (<span class="id" title="tactic">eauto</span> 1 <span class="id" title="keyword">with</span> <span class="id" title="var">datatypes</span> <span class="id" title="var">LTS</span>)].<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">Notation</span> "spank" := <span class="id" title="var">spank</span> ().<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">spank</span> := <span class="id" title="var">ltac2</span>:(<span class="id" title="var">spank</span>).<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">rec</span> <span class="id" title="var">generalize_dependent</span> (<span class="id" title="keyword">is</span> : <span class="id" title="var">ident</span> <span class="id" title="var">list</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">is</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [] ⇒ ()<br/>
&nbsp;&nbsp;| <span class="id" title="var">i</span>::<span class="id" title="var">rest</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ltac1</span>:(<span class="id" title="var">i</span> |- <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">i</span>) (<span class="id" title="var">Ltac1.of_ident</span> <span class="id" title="var">i</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">generalize_dependent</span> <span class="id" title="var">rest</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">Notation</span> "generalize" "dependent" <span class="id" title="var">i</span>(<span class="id" title="var">list1</span>(<span class="id" title="var">ident</span>)) := <span class="id" title="var">generalize_dependent</span> <span class="id" title="var">i</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">lia_</span> () := <span class="id" title="var">ltac1</span>:(<span class="id" title="var">lia</span>).<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">Notation</span> <span class="id" title="var">lia</span> := <span class="id" title="var">lia_</span> ().<br/>

<br/>
<span class="id" title="keyword">Create HintDb</span> <span class="id" title="var">LTS</span>.<br/>
<span class="id" title="keyword">Create HintDb</span> <span class="id" title="var">LTS_concl</span>.<br/>
<span class="id" title="keyword">Create HintDb</span> <span class="id" title="var">LTS_early</span>.<br/>
<span class="id" title="keyword">Create HintDb</span> <span class="id" title="var">LTS_concl_early</span>.<br/>
<span class="id" title="keyword">Create HintDb</span> <span class="id" title="var">rew</span>.<br/>
<span class="id" title="keyword">Create HintDb</span> <span class="id" title="var">bs</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="hintdb_teaser" class="idref" href="#hintdb_teaser"><span class="id" title="lemma">hintdb_teaser</span></a> : 21 <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 16 <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 37. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">auto</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Hint Rewrite</span> <a class="idref" href="DlStalk.Tactics.html#hintdb_teaser"><span class="id" title="lemma">hintdb_teaser</span></a> : <span class="id" title="var">LTS</span> <span class="id" title="var">LTS_concl</span>.<br/>

<br/>
</div>

<div class="doc">
"bogus statement" --- tactic to brutally find contradictions 
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">bs_</span> (<span class="id" title="var">on</span> : (<span class="id" title="keyword">constr</span> × (<span class="id" title="var">unit</span> → <span class="id" title="var">unit</span>) <span class="id" title="var">option</span>) <span class="id" title="var">option</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">intros</span> ?);<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">on</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">None</span> ⇒ ()<br/>
&nbsp;&nbsp;| <span class="id" title="var">Some</span> (<span class="id" title="var">c</span>, <span class="id" title="var">s</span>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">s</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">match</span> <span class="id" title="var">s</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">None</span> ⇒ <span class="id" title="keyword">fun</span> () ⇒ <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">LTS</span> <span class="id" title="var">bs</span> <span class="id" title="var">datatypes</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Some</span> <span class="id" title="var">s</span> ⇒ <span class="id" title="var">s</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> $<span class="id" title="var">c</span> <span class="id" title="tactic">by</span> (<span class="id" title="var">s</span> ())<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="var">ltac1</span>:(<span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">bs</span> <span class="id" title="tactic">in</span> × ));<br/>
&nbsp;&nbsp;<span class="id" title="tactic">solve</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id" title="var">contradiction</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="tactic">congruence</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">lia</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">disc</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">List.iter</span> (<span class="id" title="keyword">fun</span> (<span class="id" title="var">h</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span>) ⇒ <span class="id" title="tactic">try</span> (<span class="id" title="var">kill</span> $<span class="id" title="var">h</span>)) (<span class="id" title="var">hyps</span> ())<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="keyword">match</span>! <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">h</span> : ?<span class="id" title="var">p</span> |- <span class="id" title="var">_</span>] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> (<span class="id" title="var">Constr.equal</span> (<span class="id" title="var">Constr.type</span> <span class="id" title="var">p</span>) '<span class="id" title="keyword">Prop</span>) <span class="id" title="keyword">then</span> () <span class="id" title="keyword">else</span> <span class="id" title="tactic">fail</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">hh</span> := <span class="id" title="var">hyp</span> <span class="id" title="var">h</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lazy_match</span>! <span class="id" title="var">p</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#not"><span class="id" title="definition">not</span></a> <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exfalso</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> $<span class="id" title="var">hh</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">solve</span> [<span class="id" title="tactic">eauto</span> 3 <span class="id" title="keyword">with</span> <span class="id" title="var">bs</span> <span class="id" title="var">LTS</span> <span class="id" title="var">datatypes</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">absurd</span> $<span class="id" title="var">p</span> &gt; [| <span class="id" title="tactic">exact</span> $<span class="id" title="var">hh</span> ];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">solve</span> [<span class="id" title="tactic">eauto</span> 3 <span class="id" title="keyword">with</span> <span class="id" title="var">bs</span> <span class="id" title="var">LTS</span> <span class="id" title="var">datatypes</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;].<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">bs_or</span><br/>
&nbsp;&nbsp;(<span class="id" title="var">on</span> : (<span class="id" title="keyword">constr</span> × (<span class="id" title="var">unit</span> → <span class="id" title="var">unit</span>) <span class="id" title="var">option</span>) <span class="id" title="var">option</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">or_catch</span> : <span class="id" title="var">unit</span> → <span class="id" title="var">unit</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">orelse</span> (<span class="id" title="keyword">fun</span> () ⇒ <span class="id" title="var">bs_</span> <span class="id" title="var">on</span>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">or_catch</span> ()).<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">Notation</span> "bs"<br/>
&nbsp;&nbsp;<span class="id" title="var">on</span>(<span class="id" title="var">opt</span>(<span class="id" title="var">seq</span>(<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">open_constr</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">opt</span>(<span class="id" title="var">seq</span>("by", <span class="id" title="var">thunk</span>(<span class="id" title="var">tactic</span>)))<br/>
&nbsp;&nbsp;))) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">Control.enter</span> (<span class="id" title="keyword">fun</span> () ⇒ <span class="id" title="var">bs_or</span> <span class="id" title="var">on</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> () ⇒ <span class="id" title="var">Control.zero</span> (<span class="id" title="var">Init.Tactic_failure</span> (<span class="id" title="var">Some</span> (<span class="id" title="var">Message.of_string</span> "Nothing to bs about"))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;).<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">Notation</span> "doubt"<br/>
&nbsp;&nbsp;<span class="id" title="var">on</span>(<span class="id" title="var">opt</span>(<span class="id" title="var">seq</span>(<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">open_constr</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">opt</span>(<span class="id" title="var">seq</span>("by", <span class="id" title="var">thunk</span>(<span class="id" title="var">tactic</span>)))<br/>
&nbsp;&nbsp;))) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">Control.enter</span> (<span class="id" title="keyword">fun</span> () ⇒ <span class="id" title="var">Control.once</span> (<span class="id" title="keyword">fun</span> () ⇒ <span class="id" title="tactic">try</span> (<span class="id" title="var">bs_</span> <span class="id" title="var">on</span>))).<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">ssubst_</span> () : <span class="id" title="var">unit</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span>! <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [|- ?<span class="id" title="var">_a</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">_b</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">intro</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">h</span> : ?<span class="id" title="var">_a</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">_a</span> |- <span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">clear</span> $<span class="id" title="var">h</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">h</span> : ?<span class="id" title="var">_x</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">_y</span> |- <span class="id" title="var">_</span>] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">first</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id" title="tactic">assert</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a> <span class="id" title="tactic">by</span> <span class="id" title="var">ltac1</span>:(<span class="id" title="var">h</span> |- <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">h</span>) (<span class="id" title="var">Ltac1.of_ident</span> <span class="id" title="var">h</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> $<span class="id" title="var">h</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">ltac1</span>:(<span class="id" title="var">h</span> |- <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">h</span>) (<span class="id" title="var">Ltac1.of_ident</span> <span class="id" title="var">h</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">Notation</span> <span class="id" title="var">ssubst</span> := <span class="id" title="tactic">repeat</span> (<span class="id" title="var">ssubst_</span> ()).<br/>

<br/>
</div>

<div class="doc">
Replaces all parameters with fresh variables. Returns hypos to destruct. 
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">rec</span> <span class="id" title="var">unsubst</span> (<span class="id" title="var">t</span> : <span class="id" title="keyword">constr</span>) : <span class="id" title="var">ident</span> <span class="id" title="var">list</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span>! <span class="id" title="var">t</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| ?<span class="id" title="var">f</span> ?<span class="id" title="var">x</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="var">Bool.or</span> (<span class="id" title="var">Constr.is_var</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Bool.or</span> (<span class="id" title="var">Constr.is_ind</span> <span class="id" title="var">x</span>) (<span class="id" title="var">Constr.is_const</span> <span class="id" title="var">x</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <span class="id" title="var">unsubst</span> <span class="id" title="var">f</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">let</span> <span class="id" title="var">i</span> := <span class="id" title="var">Fresh.in_goal</span> @<span class="id" title="var">arg</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">e</span> := <span class="id" title="var">Fresh.in_goal</span> @<span class="id" title="var">HEq</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> $<span class="id" title="var">x</span> <span class="id" title="keyword">as</span> $<span class="id" title="var">i</span> <span class="id" title="var">eqn</span>:$<span class="id" title="var">e</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">e</span> :: <span class="id" title="var">unsubst</span> <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ []<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">inversion_stable</span> (<span class="id" title="var">c</span> : <span class="id" title="keyword">constr</span>) (<span class="id" title="var">i</span> : <span class="id" title="var">intro_pattern</span> <span class="id" title="var">option</span>) : <span class="id" title="var">unit</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">var</span> := <span class="id" title="var">Fresh.in_goal</span> @<span class="id" title="var">x</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">to_kill</span> := <span class="id" title="var">unsubst</span> (<span class="id" title="var">Constr.type</span> <span class="id" title="var">c</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">Constr.Unsafe.kind</span> <span class="id" title="var">c</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">Constr.Unsafe.Var</span> <span class="id" title="var">v</span> ⇒ <span class="id" title="tactic">rename</span> $<span class="id" title="var">v</span> <span class="id" title="var">into</span> $<span class="id" title="var">var</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="var">remember</span> $<span class="id" title="var">c</span> <span class="id" title="keyword">as</span> $<span class="id" title="var">var</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">Std.inversion</span> <span class="id" title="var">FullInversion</span> (<span class="id" title="var">ElimOnIdent</span> <span class="id" title="var">var</span>) <span class="id" title="var">i</span> <span class="id" title="var">None</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">Control.enter</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> () ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">_</span> := <span class="id" title="var">List.map</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">i</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ltac1</span>:(<span class="id" title="var">i</span> |- <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">i</span>) (<span class="id" title="var">Ltac1.of_constr</span> (<span class="id" title="var">hyp</span> <span class="id" title="var">i</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) <span class="id" title="var">to_kill</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">clear</span> $<span class="id" title="var">var</span>); <span class="id" title="var">ssubst</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;).<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">Notation</span> "inversion_stable"<br/>
&nbsp;&nbsp;<span class="id" title="var">arg</span>(<span class="id" title="keyword">constr</span>)<br/>
&nbsp;&nbsp;<span class="id" title="var">pat</span>(<span class="id" title="var">opt</span>(<span class="id" title="var">seq</span>("as", <span class="id" title="var">intropattern</span>))) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">inversion_stable</span> <span class="id" title="var">arg</span> <span class="id" title="var">pat</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">rec</span> <span class="id" title="var">smash_eq_on_</span> (<span class="id" title="var">n0</span> : <span class="id" title="var">ident</span>) (<span class="id" title="var">ns</span> : <span class="id" title="var">ident</span> <span class="id" title="var">list</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">ns</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [] ⇒ ()<br/>
&nbsp;&nbsp;| <span class="id" title="var">n1</span> :: <span class="id" title="var">rest</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">h</span> := <span class="id" title="var">Fresh.in_goal</span> @<span class="id" title="var">HEq</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">n1_h</span> := <span class="id" title="var">hyp</span> <span class="id" title="var">n1</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">n0_h</span> := <span class="id" title="var">hyp</span> <span class="id" title="var">n0</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">{</span></a>$<span class="id" title="var">n1_h</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> $<span class="id" title="var">n0_h</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">}+{</span></a>$<span class="id" title="var">n1_h</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> $<span class="id" title="var">n0_h</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">}</span></a>) <span class="id" title="keyword">as</span> [$<span class="id" title="var">h</span>|$<span class="id" title="var">h</span>] <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span> 3 <span class="id" title="keyword">with</span> <span class="id" title="var">LTS</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">congruence</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Control.enter</span> (<span class="id" title="keyword">fun</span> () ⇒ <span class="id" title="var">smash_eq_on_</span> <span class="id" title="var">n0</span> <span class="id" title="var">rest</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">rec</span> <span class="id" title="var">smash_eq_</span> (<span class="id" title="var">ns</span> : <span class="id" title="var">ident</span> <span class="id" title="var">list</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">ns</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [] ⇒ ()<br/>
&nbsp;&nbsp;| <span class="id" title="var">n0</span> :: <span class="id" title="var">rest</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Control.enter</span> (<span class="id" title="keyword">fun</span> () ⇒ <span class="id" title="var">smash_eq_on_</span> <span class="id" title="var">n0</span> <span class="id" title="var">rest</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">smash_eq_</span> <span class="id" title="var">rest</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">subst</span> $<span class="id" title="var">n0</span>; <span class="id" title="tactic">clear</span> $<span class="id" title="var">n0</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">cleanup_eq</span> () :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="var">Control.enter</span>(<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> () ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span>! <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">h</span> : ?<span class="id" title="var">_a</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">_a</span> |- <span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">clear</span> $<span class="id" title="var">h</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;)).<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">Notation</span> "smash_eq_on" <span class="id" title="var">n</span>(<span class="id" title="var">ident</span>) <span class="id" title="var">ns</span>(<span class="id" title="var">list1</span>(<span class="id" title="var">ident</span>)) := <span class="id" title="var">smash_eq_on_</span> <span class="id" title="var">n</span> <span class="id" title="var">ns</span>; <span class="id" title="var">cleanup_eq</span> ().<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">Notation</span> "smash_eq" <span class="id" title="var">ns</span>(<span class="id" title="var">list1</span>(<span class="id" title="var">ident</span>)) := <span class="id" title="var">smash_eq_</span> <span class="id" title="var">ns</span>; <span class="id" title="var">cleanup_eq</span> ().<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">rec</span> <span class="id" title="var">strip_exists</span> <span class="id" title="var">h</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">t</span> := <span class="id" title="var">Constr.type</span> (<span class="id" title="var">hyp</span> <span class="id" title="var">h</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">lazy_match</span>! (<span class="id" title="tactic">eval</span> <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> $<span class="id" title="var">t</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#ex"><span class="id" title="inductive">ex</span></a> ?<span class="id" title="var">body</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> (<span class="id" title="var">Constr.Unsafe.kind</span> <span class="id" title="var">body</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Constr.Unsafe.Lambda</span> <span class="id" title="var">arg</span> <span class="id" title="var">_val</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">hh</span> := <span class="id" title="var">hyp</span> <span class="id" title="var">h</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">arg_n</span> := <span class="id" title="keyword">match</span> <span class="id" title="var">Constr.Binder.name</span> <span class="id" title="var">arg</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">None</span> ⇒ <span class="id" title="var">Fresh.in_goal</span> @<span class="id" title="var">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Some</span> <span class="id" title="var">n</span> ⇒ <span class="id" title="var">Fresh.in_goal</span> <span class="id" title="var">n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> $<span class="id" title="var">hh</span> <span class="id" title="keyword">as</span> [$<span class="id" title="var">arg_n</span> $<span class="id" title="var">h</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">strip_exists</span> <span class="id" title="var">h</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">hh</span> := <span class="id" title="var">hyp</span> <span class="id" title="var">h</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> $<span class="id" title="var">hh</span> <span class="id" title="keyword">as</span> [? $<span class="id" title="var">h</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">strip_exists</span> <span class="id" title="var">h</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| ?<span class="id" title="var">t</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">t</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">Notation</span> "strip" "exists" <span class="id" title="var">h</span>(<span class="id" title="var">ident</span>) := <span class="id" title="keyword">let</span> <span class="id" title="var">_</span> := <span class="id" title="var">strip_exists</span> <span class="id" title="var">h</span> <span class="id" title="tactic">in</span> ().<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="INV" class="idref" href="#INV"><span class="id" title="definition, inductive"><span id="INV_rect" class="id"><span id="INV_ind" class="id"><span id="INV_rec" class="id"><span id="INV_sind" class="id">INV</span></span></span></span></span></a> (<a id="P:6" class="idref" href="#P:6"><span class="id" title="binder">P</span></a> : <span class="id" title="keyword">Prop</span>) := <a id="INV_intro" class="idref" href="#INV_intro"><span class="id" title="constructor">INV_intro</span></a> : <a class="idref" href="DlStalk.Tactics.html#P:6"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="DlStalk.Tactics.html#INV:7"><span class="id" title="inductive">INV</span></a> <a class="idref" href="DlStalk.Tactics.html#P:6"><span class="id" title="variable">P</span></a>.<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Constructors</span> <a class="idref" href="DlStalk.Tactics.html#INV"><span class="id" title="inductive">INV</span></a> : <span class="id" title="var">LTS</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="INV_inv" class="idref" href="#INV_inv"><span class="id" title="lemma">INV_inv</span></a> {<a id="P:9" class="idref" href="#P:9"><span class="id" title="binder">P</span></a>} : <a class="idref" href="DlStalk.Tactics.html#INV"><span class="id" title="inductive">INV</span></a> <a class="idref" href="DlStalk.Tactics.html#P:9"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="DlStalk.Tactics.html#P:9"><span class="id" title="variable">P</span></a>. <span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>. <span class="id" title="var">kill</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">auto</span>. <span class="id" title="keyword">Qed</span>.<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Rewrite</span> → @<a class="idref" href="DlStalk.Tactics.html#INV_inv"><span class="id" title="lemma">INV_inv</span></a> <span class="id" title="keyword">using</span> <span class="id" title="tactic">auto</span> : <span class="id" title="var">LTS_concl</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="c69a6535496a9ddee4c0ef2864dfb688" class="idref" href="#c69a6535496a9ddee4c0ef2864dfb688"><span class="id" title="notation">&quot;</span></a>!!! P" := (<a class="idref" href="DlStalk.Tactics.html#INV"><span class="id" title="inductive">INV</span></a> <span class="id" title="var">P</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 200) : <span class="id" title="var">type_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="not_or_inv" class="idref" href="#not_or_inv"><span class="id" title="lemma">not_or_inv</span></a> <a id="P:10" class="idref" href="#P:10"><span class="id" title="binder">P</span></a> <a id="Q:11" class="idref" href="#Q:11"><span class="id" title="binder">Q</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">(</span></a><a class="idref" href="DlStalk.Tactics.html#P:10"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="DlStalk.Tactics.html#Q:11"><span class="id" title="variable">Q</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a> <a class="idref" href="DlStalk.Tactics.html#P:10"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a> <a class="idref" href="DlStalk.Tactics.html#Q:11"><span class="id" title="variable">Q</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">ltac1</span>:(<span class="id" title="tactic">intuition</span>). <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="or_neg_inv" class="idref" href="#or_neg_inv"><span class="id" title="lemma">or_neg_inv</span></a> <a id="P:12" class="idref" href="#P:12"><span class="id" title="binder">P</span></a> <a id="Q:13" class="idref" href="#Q:13"><span class="id" title="binder">Q</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a> <a class="idref" href="DlStalk.Tactics.html#Q:13"><span class="id" title="variable">Q</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="DlStalk.Tactics.html#P:12"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="DlStalk.Tactics.html#Q:13"><span class="id" title="variable">Q</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="DlStalk.Tactics.html#P:12"><span class="id" title="variable">P</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">ltac1</span>:(<span class="id" title="tactic">intuition</span>). <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="neg_or_inv" class="idref" href="#neg_or_inv"><span class="id" title="lemma">neg_or_inv</span></a> <a id="P:14" class="idref" href="#P:14"><span class="id" title="binder">P</span></a> <a id="Q:15" class="idref" href="#Q:15"><span class="id" title="binder">Q</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a> <a class="idref" href="DlStalk.Tactics.html#P:14"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="DlStalk.Tactics.html#P:14"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="DlStalk.Tactics.html#Q:15"><span class="id" title="variable">Q</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="DlStalk.Tactics.html#Q:15"><span class="id" title="variable">Q</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">ltac1</span>:(<span class="id" title="tactic">intuition</span>). <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="or_False_inv" class="idref" href="#or_False_inv"><span class="id" title="lemma">or_False_inv</span></a> <a id="P:16" class="idref" href="#P:16"><span class="id" title="binder">P</span></a> : <a class="idref" href="DlStalk.Tactics.html#P:16"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="DlStalk.Tactics.html#P:16"><span class="id" title="variable">P</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">ltac1</span>:(<span class="id" title="tactic">intuition</span>). <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="False_or_inv" class="idref" href="#False_or_inv"><span class="id" title="lemma">False_or_inv</span></a> <a id="P:17" class="idref" href="#P:17"><span class="id" title="binder">P</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="DlStalk.Tactics.html#P:17"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="DlStalk.Tactics.html#P:17"><span class="id" title="variable">P</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">ltac1</span>:(<span class="id" title="tactic">intuition</span>). <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="and_False_inv" class="idref" href="#and_False_inv"><span class="id" title="lemma">and_False_inv</span></a> <a id="P:18" class="idref" href="#P:18"><span class="id" title="binder">P</span></a> : <a class="idref" href="DlStalk.Tactics.html#P:18"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">ltac1</span>:(<span class="id" title="tactic">intuition</span>). <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="False_and_inv" class="idref" href="#False_and_inv"><span class="id" title="lemma">False_and_inv</span></a> <a id="P:19" class="idref" href="#P:19"><span class="id" title="binder">P</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="DlStalk.Tactics.html#P:19"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">ltac1</span>:(<span class="id" title="tactic">intuition</span>). <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="or_True_inv" class="idref" href="#or_True_inv"><span class="id" title="lemma">or_True_inv</span></a> <a id="P:20" class="idref" href="#P:20"><span class="id" title="binder">P</span></a> : <a class="idref" href="DlStalk.Tactics.html#P:20"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">ltac1</span>:(<span class="id" title="tactic">intuition</span>). <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="True_or_inv" class="idref" href="#True_or_inv"><span class="id" title="lemma">True_or_inv</span></a> <a id="P:21" class="idref" href="#P:21"><span class="id" title="binder">P</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="DlStalk.Tactics.html#P:21"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">ltac1</span>:(<span class="id" title="tactic">intuition</span>). <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="and_True_inv" class="idref" href="#and_True_inv"><span class="id" title="lemma">and_True_inv</span></a> <a id="P:22" class="idref" href="#P:22"><span class="id" title="binder">P</span></a> : <a class="idref" href="DlStalk.Tactics.html#P:22"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="DlStalk.Tactics.html#P:22"><span class="id" title="variable">P</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">ltac1</span>:(<span class="id" title="tactic">intuition</span>). <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="True_and_inv" class="idref" href="#True_and_inv"><span class="id" title="lemma">True_and_inv</span></a> <a id="P:23" class="idref" href="#P:23"><span class="id" title="binder">P</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="DlStalk.Tactics.html#P:23"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="DlStalk.Tactics.html#P:23"><span class="id" title="variable">P</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">ltac1</span>:(<span class="id" title="tactic">intuition</span>). <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="and_imp_inv" class="idref" href="#and_imp_inv"><span class="id" title="lemma">and_imp_inv</span></a> : <span class="id" title="keyword">∀</span> <a id="A:24" class="idref" href="#A:24"><span class="id" title="binder">A</span></a> <a id="B:25" class="idref" href="#B:25"><span class="id" title="binder">B</span></a> <a id="P:26" class="idref" href="#P:26"><span class="id" title="binder">P</span></a>, <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="DlStalk.Tactics.html#A:24"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="DlStalk.Tactics.html#B:25"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="DlStalk.Tactics.html#P:26"><span class="id" title="variable">P</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="DlStalk.Tactics.html#A:24"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="DlStalk.Tactics.html#B:25"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="DlStalk.Tactics.html#P:26"><span class="id" title="variable">P</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">ltac1</span>:(<span class="id" title="tactic">intuition</span>). <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="True_imp_inv" class="idref" href="#True_imp_inv"><span class="id" title="lemma">True_imp_inv</span></a> <a id="P:27" class="idref" href="#P:27"><span class="id" title="binder">P</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="DlStalk.Tactics.html#P:27"><span class="id" title="variable">P</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="DlStalk.Tactics.html#P:27"><span class="id" title="variable">P</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">ltac1</span>:(<span class="id" title="tactic">intuition</span>). <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="imp_True_inv" class="idref" href="#imp_True_inv"><span class="id" title="lemma">imp_True_inv</span></a> <a id="P:28" class="idref" href="#P:28"><span class="id" title="binder">P</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="DlStalk.Tactics.html#P:28"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">ltac1</span>:(<span class="id" title="tactic">intuition</span>). <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="False_imp_inv" class="idref" href="#False_imp_inv"><span class="id" title="lemma">False_imp_inv</span></a> <a id="P:29" class="idref" href="#P:29"><span class="id" title="binder">P</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="DlStalk.Tactics.html#P:29"><span class="id" title="variable">P</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">ltac1</span>:(<span class="id" title="tactic">intuition</span>). <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="imp_False_inv" class="idref" href="#imp_False_inv"><span class="id" title="lemma">imp_False_inv</span></a> <a id="P:30" class="idref" href="#P:30"><span class="id" title="binder">P</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="DlStalk.Tactics.html#P:30"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a> <a class="idref" href="DlStalk.Tactics.html#P:30"><span class="id" title="variable">P</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">ltac1</span>:(<span class="id" title="tactic">intuition</span>). <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">introsmash</span> () :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">h</span> := <span class="id" title="var">Fresh.in_goal</span> @<span class="id" title="var">INTROSMASH</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> $<span class="id" title="var">h</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">hh</span> := <span class="id" title="var">hyp</span> <span class="id" title="var">h</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">inversion</span> $<span class="id" title="var">hh</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;).<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Rewrite</span><br/>
→ <a class="idref" href="DlStalk.Tactics.html#or_neg_inv"><span class="id" title="lemma">or_neg_inv</span></a> <a class="idref" href="DlStalk.Tactics.html#neg_or_inv"><span class="id" title="lemma">neg_or_inv</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">using</span> (<span class="id" title="tactic">solve</span> [<span class="id" title="tactic">congruence</span> | <span class="id" title="var">ltac2</span>:(<span class="id" title="var">introsmash</span> ()); <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span> 1 <span class="id" title="keyword">using</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a>]) : <span class="id" title="var">LTS</span> <span class="id" title="var">LTS_concl</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Rewrite</span><br/>
→ <a class="idref" href="DlStalk.Tactics.html#not_or_inv"><span class="id" title="lemma">not_or_inv</span></a> <a class="idref" href="DlStalk.Tactics.html#and_imp_inv"><span class="id" title="lemma">and_imp_inv</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DlStalk.Tactics.html#or_False_inv"><span class="id" title="lemma">or_False_inv</span></a> <a class="idref" href="DlStalk.Tactics.html#False_or_inv"><span class="id" title="lemma">False_or_inv</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DlStalk.Tactics.html#and_False_inv"><span class="id" title="lemma">and_False_inv</span></a> <a class="idref" href="DlStalk.Tactics.html#False_and_inv"><span class="id" title="lemma">False_and_inv</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DlStalk.Tactics.html#or_True_inv"><span class="id" title="lemma">or_True_inv</span></a> <a class="idref" href="DlStalk.Tactics.html#True_or_inv"><span class="id" title="lemma">True_or_inv</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DlStalk.Tactics.html#and_True_inv"><span class="id" title="lemma">and_True_inv</span></a> <a class="idref" href="DlStalk.Tactics.html#True_and_inv"><span class="id" title="lemma">True_and_inv</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DlStalk.Tactics.html#True_imp_inv"><span class="id" title="lemma">True_imp_inv</span></a> <a class="idref" href="DlStalk.Tactics.html#imp_True_inv"><span class="id" title="lemma">imp_True_inv</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DlStalk.Tactics.html#False_imp_inv"><span class="id" title="lemma">False_imp_inv</span></a> <a class="idref" href="DlStalk.Tactics.html#imp_False_inv"><span class="id" title="lemma">imp_False_inv</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">using</span> <span class="id" title="tactic">assumption</span> : <span class="id" title="var">LTS</span> <span class="id" title="var">LTS_concl</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">debs</span> (<span class="id" title="var">h</span> : <span class="id" title="var">ident</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">hh</span> := <span class="id" title="var">hyp</span> <span class="id" title="var">h</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ht</span> := <span class="id" title="var">Constr.type</span> <span class="id" title="var">hh</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">equiv</span> := <span class="id" title="var">Fresh.in_goal</span> @<span class="id" title="var">EQUIV</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span>! <span class="id" title="tactic">eval</span> <span class="id" title="tactic">cbv</span> <span class="id" title="tactic">in</span> $<span class="id" title="var">ht</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="keyword">context</span> <span class="id" title="var">c</span> [?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">b</span>] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="var">Constr.equal</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> ($<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> $<span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a>) <span class="id" title="keyword">as</span> $<span class="id" title="var">equiv</span> <span class="id" title="tactic">by</span> ((<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>) &gt; [<span class="id" title="tactic">constructor</span> | <span class="id" title="tactic">reflexivity</span>]);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ltac1</span>:(<span class="id" title="var">equiv</span> <span class="id" title="var">h</span> |- <span class="id" title="var">rewrite_strat</span> <span class="id" title="var">bottomup</span> <span class="id" title="tactic">progress</span> <span class="id" title="var">equiv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">h</span>) (<span class="id" title="var">Ltac1.of_ident</span> <span class="id" title="var">equiv</span>) (<span class="id" title="var">Ltac1.of_ident</span> <span class="id" title="var">h</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> $<span class="id" title="var">equiv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">fa</span>, <span class="id" title="var">aa</span>) := <span class="id" title="var">split_app</span> <span class="id" title="var">a</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">fb</span>, <span class="id" title="var">ab</span>) := <span class="id" title="var">split_app</span> <span class="id" title="var">b</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="var">Bool.and</span> (<span class="id" title="var">Constr.is_constructor</span> <span class="id" title="var">fa</span>) (<span class="id" title="var">Constr.is_constructor</span> <span class="id" title="var">fb</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="var">Constr.equal</span> <span class="id" title="var">fa</span> <span class="id" title="var">fb</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ht'</span> := <span class="id" title="var">List.fold_right</span> (<span class="id" title="keyword">fun</span> (<span class="id" title="var">xa</span>, <span class="id" title="var">xb</span>) <span class="id" title="var">acc</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="var">Constr.equal</span> <span class="id" title="var">xa</span> <span class="id" title="var">xb</span> <span class="id" title="keyword">then</span> <span class="id" title="var">acc</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="keyword">if</span> <span class="id" title="var">Constr.equal</span> <span class="id" title="var">acc</span> '<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> '($<span class="id" title="var">xa</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> $<span class="id" title="var">xb</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> '($<span class="id" title="var">xa</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> $<span class="id" title="var">xb</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> $<span class="id" title="var">acc</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">List.combine</span> <span class="id" title="var">aa</span> <span class="id" title="var">ab</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> ($<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> $<span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> $<span class="id" title="var">ht'</span>) <span class="id" title="keyword">as</span> $<span class="id" title="var">equiv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> $<span class="id" title="var">equiv</span>) &gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">he</span> := <span class="id" title="var">hyp</span> <span class="id" title="var">equiv</span> <span class="id" title="tactic">in</span> <span class="id" title="tactic">inversion</span> $<span class="id" title="var">he</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">kill</span> $<span class="id" title="var">equiv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ltac1</span>:(<span class="id" title="var">equiv</span> <span class="id" title="var">h</span> |- <span class="id" title="var">rewrite_strat</span> <span class="id" title="var">bottomup</span> <span class="id" title="tactic">progress</span> <span class="id" title="var">equiv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">h</span>) (<span class="id" title="var">Ltac1.of_ident</span> <span class="id" title="var">equiv</span>) (<span class="id" title="var">Ltac1.of_ident</span> <span class="id" title="var">h</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> $<span class="id" title="var">equiv</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">_</span> := <span class="id" title="var">Pattern.instantiate</span> <span class="id" title="var">c</span> '<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> ($<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> $<span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a>) <span class="id" title="keyword">as</span> $<span class="id" title="var">equiv</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> $<span class="id" title="var">equiv</span>; <span class="id" title="var">kill</span> $<span class="id" title="var">equiv</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ltac1</span>:(<span class="id" title="var">equiv</span> <span class="id" title="var">h</span> |- <span class="id" title="var">rewrite_strat</span> <span class="id" title="var">bottomup</span> <span class="id" title="tactic">progress</span> <span class="id" title="var">equiv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">h</span>) (<span class="id" title="var">Ltac1.of_ident</span> <span class="id" title="var">equiv</span>) (<span class="id" title="var">Ltac1.of_ident</span> <span class="id" title="var">h</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> $<span class="id" title="var">equiv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="tactic">fail</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">rec</span> <span class="id" title="var">split_hyp</span> (<span class="id" title="var">h</span> : <span class="id" title="var">ident</span>) : <span class="id" title="var">ident</span> <span class="id" title="var">list</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">hh</span> := <span class="id" title="var">hyp</span> <span class="id" title="var">h</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ht</span> := <span class="id" title="var">Constr.type</span> <span class="id" title="var">hh</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span>! (<span class="id" title="tactic">eval</span> <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> $<span class="id" title="var">ht</span>) <span class="id" title="keyword">with</span><br/>
<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a> ⇒ <span class="id" title="tactic">clear</span> - $<span class="id" title="var">h</span>; []<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a> ⇒ <span class="id" title="tactic">clear</span> $<span class="id" title="var">h</span>; []<br/>
<br/>
&nbsp;&nbsp;| ?<span class="id" title="var">_a</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">_a</span> ⇒ <span class="id" title="tactic">clear</span> $<span class="id" title="var">h</span>; []<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ltac1</span>:(<span class="id" title="var">h</span> |- <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">h</span>) (<span class="id" title="var">Ltac1.of_ident</span> <span class="id" title="var">h</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[]<br/>
&nbsp;&nbsp;| ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">b</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">Constr.Unsafe.kind</span> <span class="id" title="var">a</span>, <span class="id" title="var">Constr.Unsafe.kind</span> <span class="id" title="var">b</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Constr.Unsafe.Var</span> <span class="id" title="var">i</span>, <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">subst</span> $<span class="id" title="var">i</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">Constr.Unsafe.Var</span> <span class="id" title="var">i</span> ⇒ <span class="id" title="tactic">subst</span> $<span class="id" title="var">i</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">fail</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>; []<br/>
<br/>
&nbsp;&nbsp;| ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">b</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">al</span> := <span class="id" title="var">get_left_app</span> <span class="id" title="var">a</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">bl</span> := <span class="id" title="var">get_left_app</span> <span class="id" title="var">b</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="var">Bool.and</span> (<span class="id" title="var">Constr.is_constructor</span> <span class="id" title="var">al</span>) (<span class="id" title="var">Constr.is_constructor</span> <span class="id" title="var">bl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="var">Constr.equal</span> (<span class="id" title="tactic">eval</span> <span class="id" title="tactic">cbv</span> <span class="id" title="tactic">in</span> $<span class="id" title="var">al</span>) (<span class="id" title="tactic">eval</span> <span class="id" title="tactic">cbv</span> <span class="id" title="tactic">in</span> $<span class="id" title="var">bl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">rec</span> <span class="id" title="var">collect</span> () :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span>! <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [|- ?<span class="id" title="var">_ht</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">_</span>] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">h'</span> := <span class="id" title="var">Fresh.in_goal</span> <span class="id" title="var">h</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> $<span class="id" title="var">h'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">List.append</span> (<span class="id" title="var">split_hyp</span> <span class="id" title="var">h'</span>) (<span class="id" title="var">collect</span> ())<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [|-<span class="id" title="var">_</span>] ⇒ []<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">injection</span> $<span class="id" title="var">hh</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> $<span class="id" title="var">h</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">collect</span> ()<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">i</span> := <span class="id" title="var">Fresh.in_goal</span> @<span class="id" title="var">BS</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a> <span class="id" title="keyword">as</span> $<span class="id" title="var">i</span> <span class="id" title="tactic">by</span> <span class="id" title="var">kill</span> $<span class="id" title="var">h</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> - $<span class="id" title="var">i</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">i</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> (<span class="id" title="tactic">fail</span>; [])<br/>
<br/>
<br/>
&nbsp;&nbsp;| ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">b</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="var">Bool.and</span> (<span class="id" title="var">is_constructor_app</span> <span class="id" title="var">a</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Bool.neg</span> (<span class="id" title="var">is_constructor_app</span> <span class="id" title="var">b</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> <span class="id" title="tactic">in</span> $<span class="id" title="var">h</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> (<span class="id" title="tactic">fail</span>; [])<br/>
<br/>
&nbsp;&nbsp;| ?<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">c</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="var">Bool.and</span> (<span class="id" title="var">is_constructor_app</span> <span class="id" title="var">c</span>) (<span class="id" title="var">Bool.neg</span> (<span class="id" title="var">is_constructor_app</span> <span class="id" title="var">x</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <span class="id" title="keyword">match</span>! <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">h'</span> : ?<span class="id" title="var">x'</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">c'</span> |- <span class="id" title="var">_</span>] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="var">Bool.and</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is_constructor_app</span> <span class="id" title="var">c'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Bool.and</span> (<span class="id" title="var">Constr.equal</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span>) (<span class="id" title="var">Bool.neg</span> (<span class="id" title="var">Ident.equal</span> <span class="id" title="var">h</span> <span class="id" title="var">h'</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <span class="id" title="keyword">let</span> <span class="id" title="var">hh'</span> := <span class="id" title="var">hyp</span> <span class="id" title="var">h'</span> <span class="id" title="tactic">in</span> <span class="id" title="tactic">rewrite</span> $<span class="id" title="var">hh'</span> <span class="id" title="tactic">in</span> $<span class="id" title="var">h</span>; <span class="id" title="var">split_hyp</span> <span class="id" title="var">h</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> (<span class="id" title="tactic">fail</span>; [])<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> (<span class="id" title="tactic">fail</span>; [])<br/>
<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">h1</span> := <span class="id" title="var">Fresh.in_goal</span> <span class="id" title="var">h</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> $<span class="id" title="var">hh</span> <span class="id" title="keyword">as</span> [$<span class="id" title="var">h</span> $<span class="id" title="var">h1</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">l0</span> := <span class="id" title="var">split_hyp</span> <span class="id" title="var">h</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">orelse</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> () ⇒ <span class="id" title="var">List.append</span> <span class="id" title="var">l0</span> (<span class="id" title="var">split_hyp</span> <span class="id" title="var">h1</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">l0</span>)<br/>
<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">iff</span> <span class="id" title="tactic">in</span> $<span class="id" title="var">h</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">split_hyp</span> <span class="id" title="var">h</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#ex"><span class="id" title="inductive">ex</span></a> <span class="id" title="var">_</span> ⇒ <span class="id" title="keyword">let</span> <span class="id" title="var">_</span> := <span class="id" title="var">strip_exists</span> <span class="id" title="var">h</span> <span class="id" title="tactic">in</span> <span class="id" title="var">split_hyp</span> <span class="id" title="var">h</span><br/>
&nbsp;&nbsp;| <span class="id" title="keyword">context</span> [<span class="id" title="keyword">match</span> ?<span class="id" title="var">p</span> <span class="id" title="keyword">with</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">_</span> <span class="id" title="keyword">end</span>] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span>! <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">h'</span> : ?<span class="id" title="var">p'</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">c</span> |- <span class="id" title="var">_</span>] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="var">Bool.and</span> (<span class="id" title="var">is_constructor_app</span> <span class="id" title="var">c</span>) (<span class="id" title="var">Constr.equal</span> <span class="id" title="var">p</span> <span class="id" title="var">p'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <span class="id" title="keyword">let</span> <span class="id" title="var">hh'</span> := <span class="id" title="var">hyp</span> <span class="id" title="var">h'</span> <span class="id" title="tactic">in</span> <span class="id" title="tactic">rewrite</span> $<span class="id" title="var">hh'</span> <span class="id" title="tactic">in</span> $<span class="id" title="var">h</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> $<span class="id" title="var">h</span>; <span class="id" title="var">split_hyp</span> <span class="id" title="var">h</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> (<span class="id" title="tactic">fail</span>; [])<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| <a class="idref" href="DlStalk.Tactics.html#INV"><span class="id" title="inductive">INV</span></a> <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> $<span class="id" title="var">hh</span> <span class="id" title="keyword">as</span> ($<span class="id" title="var">h</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ltac1</span>:(<span class="id" title="var">h</span> |- <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">h</span>) (<span class="id" title="var">Ltac1.of_ident</span> <span class="id" title="var">h</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[]<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ [<span class="id" title="var">h</span>]<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="b535194c92e1fd3a49e9c62293cb494d" class="idref" href="#b535194c92e1fd3a49e9c62293cb494d"><span class="id" title="notation">&quot;</span></a>n |: p" := (<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="n:31" class="idref" href="#n:31"><span class="id" title="binder">n</span></a> : <span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 80) : <span class="id" title="var">type_scope</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#app_comm_cons"><span class="id" title="lemma">app_comm_cons</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a> <span class="id" title="keyword">using</span> <span class="id" title="tactic">assumption</span> : <span class="id" title="var">LTS_L_prep</span>.<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Rewrite</span> → <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#app_comm_cons"><span class="id" title="lemma">app_comm_cons</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a> <span class="id" title="keyword">using</span> <span class="id" title="tactic">assumption</span> : <span class="id" title="var">LTS_R_prep</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Falsify_inv" class="idref" href="#Falsify_inv"><span class="id" title="lemma">Falsify_inv</span></a> <a id="P:32" class="idref" href="#P:32"><span class="id" title="binder">P</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="DlStalk.Tactics.html#P:32"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">ltac1</span>:(<span class="id" title="tactic">intuition</span>). <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Hint Rewrite</span> → <a class="idref" href="DlStalk.Tactics.html#Falsify_inv"><span class="id" title="lemma">Falsify_inv</span></a> <span class="id" title="keyword">using</span> <span class="id" title="tactic">assumption</span> : <span class="id" title="var">bs</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">autorewrite_hyp_LTS</span> <span class="id" title="var">h</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">rewrite_strat</span> <span class="id" title="var">choice</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">hints</span> <span class="id" title="var">bs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">topdown</span> <span class="id" title="tactic">progress</span> <span class="id" title="var">hints</span> <span class="id" title="var">LTS</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="var">bottomup</span> <span class="id" title="tactic">progress</span> <span class="id" title="var">hints</span> <span class="id" title="var">LTS_L_prep</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">topdown</span> <span class="id" title="tactic">progress</span> <span class="id" title="var">hints</span> <span class="id" title="var">LTS_L</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="var">bottomup</span> <span class="id" title="tactic">progress</span> <span class="id" title="var">hints</span> <span class="id" title="var">LTS_R_prep</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">topdown</span> <span class="id" title="tactic">progress</span> <span class="id" title="var">hints</span> <span class="id" title="var">LTS_R</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="var">h</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">autorewrite_concl_LTS</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">rewrite_strat</span> <span class="id" title="var">choice</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">hints</span> <span class="id" title="var">bs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">topdown</span> <span class="id" title="tactic">progress</span> <span class="id" title="var">hints</span> <span class="id" title="var">LTS_concl</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="var">bottomup</span> <span class="id" title="tactic">progress</span> <span class="id" title="var">hints</span> <span class="id" title="var">LTS_L_prep</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">topdown</span> <span class="id" title="tactic">progress</span> <span class="id" title="var">hints</span> <span class="id" title="var">LTS_concl_L</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="var">bottomup</span> <span class="id" title="tactic">progress</span> <span class="id" title="var">hints</span> <span class="id" title="var">LTS_R_prep</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">topdown</span> <span class="id" title="tactic">progress</span> <span class="id" title="var">hints</span> <span class="id" title="var">LTS_concl_R</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;).<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">autorewrite_LTS</span> (<span class="id" title="var">h</span> : <span class="id" title="var">ident</span> <span class="id" title="var">option</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">h</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">Some</span> <span class="id" title="var">h</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ltac1</span>:(<span class="id" title="var">h</span> |- <span class="id" title="var">autorewrite_hyp_LTS</span> <span class="id" title="var">h</span>) (<span class="id" title="var">Ltac1.of_ident</span> <span class="id" title="var">h</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">None</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ltac1</span>:(<span class="id" title="var">autorewrite_concl_LTS</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">autorewrite_LTS_lite</span> (<span class="id" title="var">h</span> : <span class="id" title="var">ident</span> <span class="id" title="var">option</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">h</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">Some</span> <span class="id" title="var">h</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ltac1</span>:(<span class="id" title="var">h</span> |- <span class="id" title="var">rewrite_strat</span> <span class="id" title="var">choice</span> (<span class="id" title="var">hints</span> <span class="id" title="var">bs</span>) (<span class="id" title="var">topdown</span> <span class="id" title="tactic">progress</span> <span class="id" title="var">hints</span> <span class="id" title="var">LTS</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">h</span>) (<span class="id" title="var">Ltac1.of_ident</span> <span class="id" title="var">h</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">None</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ltac1</span>:(<span class="id" title="var">rewrite_strat</span> <span class="id" title="var">choice</span> (<span class="id" title="var">hints</span> <span class="id" title="var">bs</span>) (<span class="id" title="var">topdown</span> <span class="id" title="tactic">progress</span> <span class="id" title="var">hints</span> <span class="id" title="var">LTS_concl</span>))<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">autorewrite_compat</span> (<span class="id" title="var">h</span> : <span class="id" title="var">ident</span> <span class="id" title="var">option</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">h</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">Some</span> <span class="id" title="var">h</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ltac1</span>:(<span class="id" title="var">h</span> |- <span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">LTS</span> <span class="id" title="tactic">in</span> <span class="id" title="var">h</span>) (<span class="id" title="var">Ltac1.of_ident</span> <span class="id" title="var">h</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">None</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ltac1</span>:( <span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">LTS_concl</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">rec</span> <span class="id" title="var">hammer_prep_hyp_iter</span> <span class="id" title="var">hs</span> (<span class="id" title="var">rewriter</span> : <span class="id" title="var">ident</span> → <span class="id" title="var">unit</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">hs</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [] ⇒ ()<br/>
&nbsp;&nbsp;| <span class="id" title="var">h</span>::<span class="id" title="var">hs</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">orelse</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">_</span> := <span class="id" title="var">hyp</span> <span class="id" title="var">h</span> <span class="id" title="tactic">in</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> $<span class="id" title="var">h</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ltac1</span>:(<span class="id" title="var">h</span> |- <span class="id" title="var">autounfold</span> <span class="id" title="keyword">with</span> <span class="id" title="var">rew</span> <span class="id" title="tactic">in</span> <span class="id" title="var">h</span>) (<span class="id" title="var">Ltac1.of_ident</span> <span class="id" title="var">h</span>);<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">hs'</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">orelse</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">progress</span> (<span class="id" title="var">rewriter</span> <span class="id" title="var">h</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> $<span class="id" title="var">h</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">h</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> $<span class="id" title="var">h</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Control.progress</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">repeat</span> (<span class="id" title="var">debs</span> <span class="id" title="var">h</span>); <span class="id" title="var">split_hyp</span> <span class="id" title="var">h</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">Control.numgoals</span> () <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 0 ⇒ ()<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 1 ⇒ <span class="id" title="var">hammer_prep_hyp_iter</span> (<span class="id" title="var">List.append</span> <span class="id" title="var">hs'</span> <span class="id" title="var">hs</span>) <span class="id" title="var">rewriter</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">n</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">msg_0</span> := <span class="id" title="var">Message.of_string</span> "Splitting hypothesis " <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">msg_h</span> := <span class="id" title="var">Message.of_ident</span> <span class="id" title="var">h</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">msg_1</span> := <span class="id" title="var">Message.of_string</span> " lead to goal explosion: " <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">msg_n</span> := <span class="id" title="var">Message.of_int</span> <span class="id" title="var">n</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">msg</span> := <span class="id" title="var">List.fold_right</span> <span class="id" title="var">Message.concat</span> [<span class="id" title="var">msg_0</span>; <span class="id" title="var">msg_h</span>; <span class="id" title="var">msg_1</span>] <span class="id" title="var">msg_n</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Control.throw</span> (<span class="id" title="var">Init.Tactic_failure</span> (<span class="id" title="var">Some</span> <span class="id" title="var">msg</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">hammer_prep_hyp_iter</span> <span class="id" title="var">hs</span> <span class="id" title="var">rewriter</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">hammer_prep_hyp</span> <span class="id" title="var">h</span> <span class="id" title="var">rewriter</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">hammer_prep_hyp_iter</span> [<span class="id" title="var">h</span>] <span class="id" title="var">rewriter</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">simpl_match</span> () :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span>! <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [|- <span class="id" title="keyword">context</span> [<span class="id" title="keyword">match</span> ?<span class="id" title="var">x</span> <span class="id" title="keyword">with</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">_</span> <span class="id" title="keyword">end</span>]] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span>! <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">h</span> : ?<span class="id" title="var">x'</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">c</span> |- <span class="id" title="var">_</span>] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="var">Bool.and</span> (<span class="id" title="var">is_constructor_app</span> <span class="id" title="var">c</span>) (<span class="id" title="var">Constr.equal</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <span class="id" title="keyword">let</span> <span class="id" title="var">hh</span> := <span class="id" title="var">hyp</span> <span class="id" title="var">h</span> <span class="id" title="tactic">in</span> <span class="id" title="tactic">rewrite</span> $<span class="id" title="var">hh</span>; <span class="id" title="tactic">simpl</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="tactic">fail</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">h</span> : ?<span class="id" title="var">c</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">x'</span> |- <span class="id" title="var">_</span>] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="var">Bool.and</span> (<span class="id" title="var">is_constructor_app</span> <span class="id" title="var">c</span>) (<span class="id" title="var">Constr.equal</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <span class="id" title="keyword">let</span> <span class="id" title="var">hh</span> := <span class="id" title="var">hyp</span> <span class="id" title="var">h</span> <span class="id" title="tactic">in</span> <span class="id" title="tactic">rewrite</span> &lt;- $<span class="id" title="var">hh</span>; <span class="id" title="tactic">simpl</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="tactic">fail</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [|- <span class="id" title="var">_</span>] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> $<span class="id" title="var">x</span> <span class="id" title="var">eqn</span>:?;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">Control.numgoals</span> () <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 1 ⇒ ()<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">fail</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">hsimpl_</span> (<span class="id" title="var">c</span> : <span class="id" title="var">clause</span> <span class="id" title="var">option</span>) (<span class="id" title="var">rewriter</span> : (<span class="id" title="var">ident</span> <span class="id" title="var">option</span> → <span class="id" title="var">unit</span>) <span class="id" title="var">option</span>) : <span class="id" title="var">unit</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">rewriter</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">rewriter</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">None</span> ⇒ <span class="id" title="keyword">fun</span> <span class="id" title="var">h</span> ⇒ <span class="id" title="var">autorewrite_LTS</span> <span class="id" title="var">h</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Some</span> <span class="id" title="var">rewriter</span> ⇒ <span class="id" title="var">rewriter</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">on_hyps</span>, <span class="id" title="var">on_concl</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">c</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">None</span> ⇒ ([], <span class="id" title="var">AllOccurrences</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Some</span> {<span class="id" title="var">on_hyps</span>;<span class="id" title="var">on_concl</span>} ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">on_hyps</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">on_hyps</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">None</span> ⇒ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">selector</span> (<span class="id" title="var">h</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span>) := (<span class="id" title="var">h</span>, <span class="id" title="var">AllOccurrences</span>, <span class="id" title="var">InHyp</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">List.map</span> <span class="id" title="var">selector</span> (<span class="id" title="var">List.rev</span> (<span class="id" title="var">Control.hyps</span> ()))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Some</span> <span class="id" title="var">hs</span> ⇒ <span class="id" title="var">hs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">on_hyps</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">selector</span> <span class="id" title="var">cl</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">cl</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id" title="var">h</span>, <span class="id" title="var">AllOccurrences</span>, <span class="id" title="var">_</span>) ⇒ [<span class="id" title="var">h</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id" title="var">_</span>, <span class="id" title="var">NoOccurrences</span>, <span class="id" title="var">_</span>) ⇒ []<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id" title="var">h</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">msg_0</span> := <span class="id" title="var">Message.of_string</span> "Unsupported hyp clause in hsimpl for " <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">msg_h</span> := <span class="id" title="var">Message.of_ident</span> <span class="id" title="var">h</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Control.throw</span> (<span class="id" title="var">Init.Tactic_failure</span> (<span class="id" title="var">Some</span> (<span class="id" title="var">Message.concat</span> <span class="id" title="var">msg_0</span> <span class="id" title="var">msg_h</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">List.flat_map</span> <span class="id" title="var">selector</span> <span class="id" title="var">on_hyps</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">on_hyps</span>, <span class="id" title="var">on_concl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">_</span> := <span class="id" title="var">hammer_prep_hyp_iter</span> <span class="id" title="var">on_hyps</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">h</span> ⇒ <span class="id" title="var">rewriter</span> (<span class="id" title="var">Some</span> <span class="id" title="var">h</span>)) <span class="id" title="tactic">in</span><br/>
<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">on_concl</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">AllOccurrences</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> |- *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="var">rewriter</span> <span class="id" title="var">None</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> |- *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="var">simpl_match</span> ());<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> |- ×<br/>
&nbsp;&nbsp;| <span class="id" title="var">NoOccurrences</span> ⇒ ()<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">msg</span> := <span class="id" title="var">Message.of_string</span> "Unsupported concl occurrences in hsimpl" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Control.throw</span> (<span class="id" title="var">Init.Tactic_failure</span> (<span class="id" title="var">Some</span> <span class="id" title="var">msg</span>))<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">Notation</span> "hsimpl" <span class="id" title="var">cl</span>(<span class="id" title="var">opt</span>(<span class="id" title="var">clause</span>)) <span class="id" title="var">rewriter</span>(<span class="id" title="var">opt</span>(<span class="id" title="var">seq</span>("with", <span class="id" title="var">thunk</span>(<span class="id" title="var">tactic</span>)))) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">Control.enter</span> (<span class="id" title="keyword">fun</span> () ⇒ <span class="id" title="var">hsimpl_</span> <span class="id" title="var">cl</span> <span class="id" title="var">rewriter</span>).<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">Notation</span> "compat_hsimpl" <span class="id" title="var">cl</span>(<span class="id" title="var">opt</span>(<span class="id" title="var">clause</span>)) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">Control.enter</span> (<span class="id" title="keyword">fun</span> () ⇒ <span class="id" title="var">hsimpl_</span> <span class="id" title="var">cl</span> (<span class="id" title="var">Some</span> <span class="id" title="var">autorewrite_compat</span>)).<br/>

<br/>
<span class="id" title="keyword">Hint Rewrite</span> → <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#in_app_iff"><span class="id" title="lemma">in_app_iff</span></a> <span class="id" title="keyword">using</span> <span class="id" title="tactic">assumption</span> : <span class="id" title="var">LTS</span> <span class="id" title="var">LTS_concl</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">splits_</span> () :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">g</span> := <span class="id" title="var">Control.goal</span> () <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span>! (<span class="id" title="tactic">eval</span> <span class="id" title="tactic">cbv</span> <span class="id" title="tactic">in</span> $<span class="id" title="var">g</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">split</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">Notation</span> "splits" :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="var">Control.enter</span> <span class="id" title="var">splits_</span>).<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">hammer</span> <span class="id" title="var">solver</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">first</span> [<span class="id" title="tactic">split</span> | <span class="id" title="tactic">progress</span> <span class="id" title="tactic">intros</span>]);<br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">solve</span> [<span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">first</span> [<span class="id" title="tactic">split</span> | <span class="id" title="tactic">intros</span> ?]); <span class="id" title="tactic">eauto</span> 5 <span class="id" title="keyword">with</span> <span class="id" title="var">datatypes</span> <span class="id" title="var">LTS</span>; <span class="id" title="tactic">congruence</span>]);<br/>
<br/>
&nbsp;&nbsp;<span class="id" title="var">Control.enter</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> () ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">hsimpl</span> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">first</span> [<span class="id" title="tactic">split</span> | <span class="id" title="tactic">progress</span> <span class="id" title="tactic">intros</span>]);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">solve</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">eauto</span> 5 <span class="id" title="keyword">with</span> <span class="id" title="var">datatypes</span> <span class="id" title="var">LTS</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">bs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">solver</span> ()<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;).<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">attac_</span> <span class="id" title="var">n</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">n</span> := <span class="id" title="keyword">match</span> <span class="id" title="var">n</span> <span class="id" title="keyword">with</span> <span class="id" title="var">None</span> ⇒ 7 | <span class="id" title="var">Some</span> <span class="id" title="var">n</span> ⇒ <span class="id" title="var">n</span> <span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">hammer</span> (<span class="id" title="keyword">fun</span> () ⇒ <span class="id" title="var">re_have</span> (<span class="id" title="tactic">auto</span> <span class="id" title="var">n</span> <span class="id" title="keyword">with</span> <span class="id" title="var">datatypes</span> <span class="id" title="var">LTS</span>)).<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">Notation</span> "attac" <span class="id" title="var">n</span>(<span class="id" title="var">opt</span>(<span class="id" title="var">tactic</span>)) := <span class="id" title="var">attac_</span> <span class="id" title="var">n</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Ltac</span> <span class="id" title="var">attac_</span> <span class="id" title="var">n</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">t</span> := <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">auto</span> <span class="id" title="var">n</span> <span class="id" title="keyword">with</span> <span class="id" title="var">datatypes</span> <span class="id" title="var">LTS</span> ] <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">f</span> := <span class="id" title="var">ltac2</span>:(<span class="id" title="var">t</span> |- <span class="id" title="var">hammer</span> (<span class="id" title="keyword">fun</span> () ⇒ <span class="id" title="var">re_have</span> (<span class="id" title="var">Ltac1.run</span> <span class="id" title="var">t</span>))) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">f</span> <span class="id" title="var">t</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Tactic</span> <span class="id" title="keyword">Notation</span> "attac" := <span class="id" title="var">ltac2</span>:(<span class="id" title="var">attac</span>).<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Tactic</span> <span class="id" title="keyword">Notation</span> "attac" <span class="id" title="var">natural</span>(<span class="id" title="var">n</span>) := <span class="id" title="var">attac_</span> <span class="id" title="var">n</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">eattac_</span> <span class="id" title="var">n</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">n</span> := <span class="id" title="keyword">match</span> <span class="id" title="var">n</span> <span class="id" title="keyword">with</span> <span class="id" title="var">None</span> ⇒ 7 | <span class="id" title="var">Some</span> <span class="id" title="var">n</span> ⇒ <span class="id" title="var">n</span> <span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">hammer</span> (<span class="id" title="keyword">fun</span> () ⇒ <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="var">re_have</span> (<span class="id" title="tactic">eauto</span> <span class="id" title="var">n</span> <span class="id" title="keyword">with</span> <span class="id" title="var">datatypes</span> <span class="id" title="var">LTS</span>)]).<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">Notation</span> "eattac" <span class="id" title="var">n</span>(<span class="id" title="var">opt</span>(<span class="id" title="var">tactic</span>)) := <span class="id" title="var">eattac_</span> <span class="id" title="var">n</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Ltac</span> <span class="id" title="var">eattac_</span> <span class="id" title="var">n</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">t</span> := <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="var">n</span> <span class="id" title="keyword">with</span> <span class="id" title="var">datatypes</span> <span class="id" title="var">LTS</span>] <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">f</span> := <span class="id" title="var">ltac2</span>:(<span class="id" title="var">t</span> |- <span class="id" title="var">hammer</span> (<span class="id" title="keyword">fun</span> () ⇒ <span class="id" title="var">re_have</span> (<span class="id" title="var">Ltac1.run</span> <span class="id" title="var">t</span>))) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">f</span> <span class="id" title="var">t</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Tactic</span> <span class="id" title="keyword">Notation</span> "eattac" := <span class="id" title="var">ltac2</span>:(<span class="id" title="var">eattac</span>).<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Tactic</span> <span class="id" title="keyword">Notation</span> "eattac" <span class="id" title="var">natural</span>(<span class="id" title="var">n</span>) := <span class="id" title="var">eattac_</span> <span class="id" title="var">n</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">tattac_</span> <span class="id" title="var">n</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">n</span> := <span class="id" title="keyword">match</span> <span class="id" title="var">n</span> <span class="id" title="keyword">with</span> <span class="id" title="var">None</span> ⇒ 7 | <span class="id" title="var">Some</span> <span class="id" title="var">n</span> ⇒ <span class="id" title="var">n</span> <span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">hammer</span> (<span class="id" title="keyword">fun</span> () ⇒ <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="var">re_have</span> (<span class="id" title="var">typeclasses_eauto</span> <span class="id" title="var">n</span> <span class="id" title="keyword">with</span> <span class="id" title="var">core</span> <span class="id" title="var">datatypes</span> <span class="id" title="var">LTS</span>)).<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">Notation</span> "tattac" <span class="id" title="var">n</span>(<span class="id" title="var">opt</span>(<span class="id" title="var">tactic</span>)) := <span class="id" title="var">tattac_</span> <span class="id" title="var">n</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Tactic</span> <span class="id" title="keyword">Notation</span> "tattac" := <span class="id" title="var">ltac2</span>:(<span class="id" title="var">tattac</span>).<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">rec</span> <span class="id" title="var">guess_head_name</span> <span class="id" title="var">t</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span>! <span class="id" title="var">t</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#not"><span class="id" title="definition">not</span></a> ?<span class="id" title="var">x</span> ⇒ <span class="id" title="var">guess_head_name</span> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;| ?<span class="id" title="var">f</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">guess_head_name</span> <span class="id" title="var">f</span><br/>
&nbsp;&nbsp;| <span class="id" title="keyword">∀</span> <span class="id" title="var">_</span>, ?<span class="id" title="var">t</span> ⇒ <span class="id" title="var">guess_head_name</span> <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> ?<span class="id" title="var">t</span> ⇒ <span class="id" title="var">guess_head_name</span> <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;| ?<span class="id" title="var">x</span> ⇒ <span class="id" title="keyword">match</span> <span class="id" title="var">Constr.Unsafe.kind</span> <span class="id" title="var">x</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Constr.Unsafe.Var</span> <span class="id" title="var">i</span> ⇒ <span class="id" title="var">Fresh.in_goal</span> <span class="id" title="var">i</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="var">Fresh.in_goal</span> @<span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">have_</span> (<span class="id" title="var">i</span> : <span class="id" title="var">ident</span> <span class="id" title="var">option</span>) (<span class="id" title="var">t</span> : <span class="id" title="keyword">constr</span>) (<span class="id" title="var">solv</span> : (<span class="id" title="var">unit</span> → <span class="id" title="var">unit</span>) <span class="id" title="var">option</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">i</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">i</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Some</span> <span class="id" title="var">i</span> ⇒ <span class="id" title="var">i</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">None</span> ⇒ <span class="id" title="var">guess_head_name</span> <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">solv</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">solv</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Some</span> <span class="id" title="var">solv</span> ⇒ <span class="id" title="var">solv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">None</span> ⇒ <span class="id" title="keyword">fun</span> () ⇒ <span class="id" title="var">attac</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="DlStalk.Tactics.html#HAVE"><span class="id" title="inductive">HAVE</span></a> $<span class="id" title="var">t</span>) <span class="id" title="keyword">as</span> $<span class="id" title="var">i</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">constructor</span>; <span class="id" title="var">solv</span> ()).<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">ehave_</span> (<span class="id" title="var">i</span> : <span class="id" title="var">ident</span> <span class="id" title="var">option</span>) (<span class="id" title="var">t</span> : <span class="id" title="keyword">constr</span>) (<span class="id" title="var">solv</span> : (<span class="id" title="var">unit</span> → <span class="id" title="var">unit</span>) <span class="id" title="var">option</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">i</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">i</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Some</span> <span class="id" title="var">i</span> ⇒ <span class="id" title="var">i</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">None</span> ⇒ <span class="id" title="var">guess_head_name</span> <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">solv</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">solv</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Some</span> <span class="id" title="var">solv</span> ⇒ <span class="id" title="var">solv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">None</span> ⇒ <span class="id" title="keyword">fun</span> () ⇒ <span class="id" title="var">eattac</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">ltac1</span>:(<span class="id" title="var">i</span> <span class="id" title="var">t</span> |- <span class="id" title="var">eassert</span> (<a class="idref" href="DlStalk.Tactics.html#HAVE"><span class="id" title="inductive">HAVE</span></a> <span class="id" title="var">t</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">i</span>) (<span class="id" title="var">Ltac1.of_ident</span> <span class="id" title="var">i</span>) (<span class="id" title="var">Ltac1.of_constr</span> <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt; [<span class="id" title="tactic">solve</span> [<span class="id" title="tactic">constructor</span>; <span class="id" title="var">solv</span> ()]|].<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">Notation</span> "have" <span class="id" title="var">t</span>(<span class="id" title="keyword">constr</span>) <span class="id" title="var">i</span>(<span class="id" title="var">opt</span>(<span class="id" title="var">seq</span>("as", <span class="id" title="var">ident</span>))) <span class="id" title="var">solv</span>(<span class="id" title="var">opt</span>(<span class="id" title="var">seq</span>("by", <span class="id" title="var">thunk</span>(<span class="id" title="var">tactic</span>)))) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">have_</span> <span class="id" title="var">i</span> <span class="id" title="var">t</span> <span class="id" title="var">solv</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">Notation</span> "ehave" <span class="id" title="var">t</span>(<span class="id" title="var">open_constr</span>) <span class="id" title="var">i</span>(<span class="id" title="var">opt</span>(<span class="id" title="var">seq</span>("as", <span class="id" title="var">ident</span>))) <span class="id" title="var">solv</span>(<span class="id" title="var">opt</span>(<span class="id" title="var">seq</span>("by", <span class="id" title="var">thunk</span>(<span class="id" title="var">tactic</span>)))) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">ehave_</span> <span class="id" title="var">i</span> <span class="id" title="var">t</span> <span class="id" title="var">solv</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="id_Prop" class="idref" href="#id_Prop"><span class="id" title="definition">id_Prop</span></a> := @<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <span class="id" title="keyword">Prop</span>.<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Transparent</span> <a class="idref" href="DlStalk.Tactics.html#id_Prop"><span class="id" title="definition">id_Prop</span></a> : <span class="id" title="var">LTS</span>.<br/>
<span class="id" title="keyword">Hint Unfold</span> <a class="idref" href="DlStalk.Tactics.html#id_Prop"><span class="id" title="definition">id_Prop</span></a> : <span class="id" title="var">LTS</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a id="un_HAVE_id" class="idref" href="#un_HAVE_id"><span class="id" title="lemma">un_HAVE_id</span></a> : <span class="id" title="keyword">∀</span> (<a id="P:33" class="idref" href="#P:33"><span class="id" title="binder">P</span></a> : <span class="id" title="keyword">Prop</span>), <a class="idref" href="DlStalk.Tactics.html#HAVE"><span class="id" title="inductive">HAVE</span></a> <a class="idref" href="DlStalk.Tactics.html#P:33"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="DlStalk.Tactics.html#id_Prop"><span class="id" title="definition">id_Prop</span></a> <a class="idref" href="DlStalk.Tactics.html#P:33"><span class="id" title="variable">P</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">kill</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="keyword">Defined</span>.<br/>
<span class="id" title="keyword">Coercion</span> <a class="idref" href="DlStalk.Tactics.html#un_HAVE_id"><span class="id" title="lemma">un_HAVE_id</span></a> <a class="idref" href="DlStalk.Tactics.html#un_HAVE_id"><span class="id" title="lemma">:</span></a> <a class="idref" href="DlStalk.Tactics.html#un_HAVE_id"><span class="id" title="lemma">HAVE</span></a> <a class="idref" href="DlStalk.Tactics.html#un_HAVE_id"><span class="id" title="lemma">&gt;-&gt;</span></a> <a class="idref" href="DlStalk.Tactics.html#un_HAVE_id"><span class="id" title="lemma">id_Prop</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="un_HAVE" class="idref" href="#un_HAVE"><span class="id" title="lemma">un_HAVE</span></a> : <span class="id" title="keyword">∀</span> [<a id="P:34" class="idref" href="#P:34"><span class="id" title="binder">P</span></a> : <span class="id" title="keyword">Prop</span>], <a class="idref" href="DlStalk.Tactics.html#HAVE"><span class="id" title="inductive">HAVE</span></a> <a class="idref" href="DlStalk.Tactics.html#P:34"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="DlStalk.Tactics.html#P:34"><span class="id" title="variable">P</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">kill</span> <span class="id" title="var">H</span>. <span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">find_h</span> (<span class="id" title="var">t</span> : <span class="id" title="keyword">constr</span>) (<span class="id" title="var">solv</span> : (<span class="id" title="var">unit</span> → <span class="id" title="var">unit</span>) <span class="id" title="var">option</span>) : <span class="id" title="keyword">constr</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">solv</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">match</span> <span class="id" title="var">solv</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Some</span> <span class="id" title="var">solv</span> ⇒ <span class="id" title="var">solv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">None</span> ⇒ <span class="id" title="keyword">fun</span> () ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="var">Constr.has_evar</span> <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">LTS</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">LTS</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;(<span class="id" title="var">multi_match</span>! <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">h</span> : ?<span class="id" title="var">t'</span> |- <span class="id" title="var">_</span>] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">tc</span> := (<span class="id" title="tactic">eval</span> <span class="id" title="tactic">cbv</span> <span class="id" title="tactic">in</span> $<span class="id" title="var">t</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">tc'</span> := (<span class="id" title="tactic">eval</span> <span class="id" title="tactic">cbv</span> <span class="id" title="tactic">in</span> $<span class="id" title="var">t'</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unify</span> $<span class="id" title="var">tc</span> $<span class="id" title="var">tc'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">hyp</span> <span class="id" title="var">h</span><br/>
&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">h</span> : <a class="idref" href="DlStalk.Tactics.html#HAVE"><span class="id" title="inductive">HAVE</span></a> ?<span class="id" title="var">t'</span> |- <span class="id" title="var">_</span>] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">tc</span> := (<span class="id" title="tactic">eval</span> <span class="id" title="tactic">cbv</span> <span class="id" title="tactic">in</span> $<span class="id" title="var">t</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">tc'</span> := (<span class="id" title="tactic">eval</span> <span class="id" title="tactic">cbv</span> <span class="id" title="tactic">in</span> $<span class="id" title="var">t'</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unify</span> $<span class="id" title="var">tc</span> $<span class="id" title="var">tc'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">hh</span> := <span class="id" title="var">hyp</span> <span class="id" title="var">h</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'(<a class="idref" href="DlStalk.Tactics.html#un_HAVE"><span class="id" title="lemma">un_HAVE</span></a> $<span class="id" title="var">hh</span>)<br/>
<br/>
&nbsp;&nbsp;&nbsp;| [|- <span class="id" title="var">_</span>] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">i</span> := <span class="id" title="var">Fresh.in_goal</span> (<span class="id" title="var">guess_head_name</span> <span class="id" title="var">t</span>) <span class="id" title="tactic">in</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ltac1</span>:(<span class="id" title="var">t</span> <span class="id" title="var">i</span> |- <span class="id" title="var">eassert</span> <span class="id" title="var">t</span> <span class="id" title="keyword">as</span> <span class="id" title="var">i</span>) (<span class="id" title="var">Ltac1.of_constr</span> <span class="id" title="var">t</span>) (<span class="id" title="var">Ltac1.of_ident</span> <span class="id" title="var">i</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt; [<span class="id" title="tactic">solve</span> [<span class="id" title="var">solv</span> () | <span class="id" title="var">shelve</span> ()]|];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">hyp</span> <span class="id" title="var">i</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;).<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">find_i</span> (<span class="id" title="var">t</span> : <span class="id" title="keyword">constr</span>) (<span class="id" title="var">solv</span> : (<span class="id" title="var">unit</span> → <span class="id" title="var">unit</span>) <span class="id" title="var">option</span>) : <span class="id" title="var">ident</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">solv</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">match</span> <span class="id" title="var">solv</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Some</span> <span class="id" title="var">solv</span> ⇒ <span class="id" title="keyword">fun</span> () ⇒ <span class="id" title="tactic">solve</span> [<span class="id" title="var">solv</span> ()]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">None</span> ⇒ <span class="id" title="keyword">fun</span> () ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">solve</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id" title="keyword">if</span> <span class="id" title="var">Constr.has_evar</span> <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">LTS</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">LTS</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">shelve</span> ()<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;(<span class="id" title="var">multi_match</span>! <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">h</span> : ?<span class="id" title="var">t'</span> |- <span class="id" title="var">_</span>] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">tc</span> := (<span class="id" title="tactic">eval</span> <span class="id" title="tactic">cbv</span> <span class="id" title="tactic">in</span> $<span class="id" title="var">t</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">tc'</span> := (<span class="id" title="tactic">eval</span> <span class="id" title="tactic">cbv</span> <span class="id" title="tactic">in</span> $<span class="id" title="var">t'</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unify</span> $<span class="id" title="var">tc</span> $<span class="id" title="var">tc'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">h</span><br/>
&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">h</span> : <a class="idref" href="DlStalk.Tactics.html#HAVE"><span class="id" title="inductive">HAVE</span></a> ?<span class="id" title="var">t'</span> |- <span class="id" title="var">_</span>] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">tc</span> := (<span class="id" title="tactic">eval</span> <span class="id" title="tactic">cbv</span> <span class="id" title="tactic">in</span> $<span class="id" title="var">t</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">tc'</span> := (<span class="id" title="tactic">eval</span> <span class="id" title="tactic">cbv</span> <span class="id" title="tactic">in</span> $<span class="id" title="var">t'</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unify</span> $<span class="id" title="var">tc</span> $<span class="id" title="var">tc'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">h</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;| [|- <span class="id" title="var">_</span>] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">i</span> := <span class="id" title="var">Fresh.in_goal</span> (<span class="id" title="var">guess_head_name</span> <span class="id" title="var">t</span>) <span class="id" title="tactic">in</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ltac1</span>:(<span class="id" title="var">t</span> <span class="id" title="var">i</span> |- <span class="id" title="var">eassert</span> <span class="id" title="var">t</span> <span class="id" title="keyword">as</span> <span class="id" title="var">i</span>) (<span class="id" title="var">Ltac1.of_constr</span> <span class="id" title="var">t</span>) (<span class="id" title="var">Ltac1.of_ident</span> <span class="id" title="var">i</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt; [<span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="DlStalk.Tactics.html#HAVE_inv"><span class="id" title="lemma">HAVE_inv</span></a>); <span class="id" title="var">solv</span> ()|];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">i</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;).<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="5c7abc465459da5b4e863842a74a30c5" class="idref" href="#5c7abc465459da5b4e863842a74a30c5"><span class="id" title="notation">&quot;</span></a>`( t )" :=<br/>
&nbsp;&nbsp;(<span class="id" title="var">ltac2</span>:(<span class="id" title="keyword">let</span> <span class="id" title="var">x</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Ltac2.Constr.Pretype.pretype</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Constr.Pretype.Flags.open_constr_flags_no_tc</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Constr.Pretype.expected_without_type_constraint</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">t</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">proof</span> := <span class="id" title="var">find_h</span> <span class="id" title="var">x</span> <span class="id" title="var">None</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> $<span class="id" title="var">proof</span><br/>
&nbsp;&nbsp;))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>).<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">consider_</span> (<span class="id" title="var">t</span> : <span class="id" title="keyword">constr</span>) (<span class="id" title="var">solver</span> : (<span class="id" title="var">unit</span> → <span class="id" title="var">unit</span>) <span class="id" title="var">option</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">i</span> := <span class="id" title="var">find_i</span> <span class="id" title="var">t</span> <span class="id" title="var">solver</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="var">autorewrite_LTS</span> (<span class="id" title="var">Some</span> <span class="id" title="var">i</span>));<br/>
&nbsp;&nbsp;<span class="id" title="tactic">first</span> [<span class="id" title="tactic">progress</span> (<span class="id" title="var">hsimpl</span> <span class="id" title="tactic">in</span> $<span class="id" title="var">i</span>)| <span class="id" title="var">kill</span> $<span class="id" title="var">i</span>].<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">Notation</span> "consider" <span class="id" title="var">t</span>(<span class="id" title="var">thunk</span>(<span class="id" title="var">open_constr</span>)) <span class="id" title="var">s</span>(<span class="id" title="var">opt</span>(<span class="id" title="var">seq</span>("by", <span class="id" title="var">thunk</span>(<span class="id" title="var">tactic</span>)))) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">Control.enter</span> (<span class="id" title="keyword">fun</span> () ⇒ <span class="id" title="var">unshelve</span> (<span class="id" title="var">consider_</span> (<span class="id" title="var">t</span> ()) <span class="id" title="var">s</span>)).<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">blast_cases_</span> () :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span>! <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">_h</span> : <span class="id" title="keyword">context</span> [<span class="id" title="keyword">let</span> (<span class="id" title="var">_</span>, <span class="id" title="var">_</span>) := ?<span class="id" title="var">t</span> <span class="id" title="tactic">in</span> <span class="id" title="var">_</span>] |- <span class="id" title="var">_</span>] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> $<span class="id" title="var">t</span> <span class="id" title="var">eqn</span>:?<br/>
&nbsp;&nbsp;| [<span class="id" title="var">_h</span> : <span class="id" title="keyword">context</span> [<span class="id" title="keyword">match</span> ?<span class="id" title="var">t</span> <span class="id" title="keyword">with</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">_</span> <span class="id" title="keyword">end</span>] |- <span class="id" title="var">_</span>] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> $<span class="id" title="var">t</span> <span class="id" title="var">eqn</span>:?<br/>
&nbsp;&nbsp;| [|- <span class="id" title="keyword">context</span> [<span class="id" title="keyword">let</span> (<span class="id" title="var">_</span>, <span class="id" title="var">_</span>) := ?<span class="id" title="var">t</span> <span class="id" title="tactic">in</span> <span class="id" title="var">_</span>]] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> $<span class="id" title="var">t</span> <span class="id" title="var">eqn</span>:?<br/>
&nbsp;&nbsp;| [|- <span class="id" title="keyword">context</span> [<span class="id" title="keyword">match</span> ?<span class="id" title="var">t</span> <span class="id" title="keyword">with</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">_</span> <span class="id" title="keyword">end</span>]] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> $<span class="id" title="var">t</span> <span class="id" title="var">eqn</span>:?<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">Notation</span> <span class="id" title="var">blast_cases</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="var">Control.enter</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">blast_cases_</span> ())).<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="MARK" class="idref" href="#MARK"><span class="id" title="definition, inductive"><span id="MARK_rect" class="id"><span id="MARK_ind" class="id"><span id="MARK_rec" class="id"><span id="MARK_sind" class="id">MARK</span></span></span></span></span></a> (<a id="s:35" class="idref" href="#s:35"><span class="id" title="binder">s</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) (<a id="P:36" class="idref" href="#P:36"><span class="id" title="binder">P</span></a> : <span class="id" title="keyword">Prop</span>) := <a id="MARK_" class="idref" href="#MARK_"><span class="id" title="constructor">MARK_</span></a> (<a id="p:39" class="idref" href="#p:39"><span class="id" title="binder">p</span></a> : <a class="idref" href="DlStalk.Tactics.html#P:36"><span class="id" title="variable">P</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="CASE_lock_str" class="idref" href="#CASE_lock_str"><span class="id" title="definition">CASE_lock_str</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>. <span class="id" title="tactic">refine</span> '("use tac" : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>). <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a id="CASE_lock" class="idref" href="#CASE_lock"><span class="id" title="lemma">CASE_lock</span></a> : <span class="id" title="keyword">∀</span> (<a id="P:40" class="idref" href="#P:40"><span class="id" title="binder">P</span></a> : <span class="id" title="keyword">Prop</span>), <a class="idref" href="DlStalk.Tactics.html#MARK"><span class="id" title="inductive">MARK</span></a> <a class="idref" href="DlStalk.Tactics.html#CASE_lock_str"><span class="id" title="definition">CASE_lock_str</span></a> <a class="idref" href="DlStalk.Tactics.html#P:40"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="DlStalk.Tactics.html#P:40"><span class="id" title="variable">P</span></a>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">auto</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="CASE_remember_str" class="idref" href="#CASE_remember_str"><span class="id" title="definition">CASE_remember_str</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>. <span class="id" title="tactic">refine</span> '("remember me" : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>). <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a id="unmark_remember" class="idref" href="#unmark_remember"><span class="id" title="lemma">unmark_remember</span></a> : <span class="id" title="keyword">∀</span> (<a id="P:41" class="idref" href="#P:41"><span class="id" title="binder">P</span></a> : <span class="id" title="keyword">Prop</span>), <a class="idref" href="DlStalk.Tactics.html#MARK"><span class="id" title="inductive">MARK</span></a> <a class="idref" href="DlStalk.Tactics.html#CASE_remember_str"><span class="id" title="definition">CASE_remember_str</span></a> <a class="idref" href="DlStalk.Tactics.html#P:41"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="DlStalk.Tactics.html#P:41"><span class="id" title="variable">P</span></a>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">auto</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a id="mark_remember" class="idref" href="#mark_remember"><span class="id" title="lemma">mark_remember</span></a> : <span class="id" title="keyword">∀</span> (<a id="P:42" class="idref" href="#P:42"><span class="id" title="binder">P</span></a> : <span class="id" title="keyword">Prop</span>), <a class="idref" href="DlStalk.Tactics.html#P:42"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="DlStalk.Tactics.html#MARK"><span class="id" title="inductive">MARK</span></a> <a class="idref" href="DlStalk.Tactics.html#CASE_remember_str"><span class="id" title="definition">CASE_remember_str</span></a> <a class="idref" href="DlStalk.Tactics.html#P:42"><span class="id" title="variable">P</span></a>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">auto</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">lock</span> () := <span class="id" title="tactic">apply</span> <a class="idref" href="DlStalk.Tactics.html#CASE_lock"><span class="id" title="lemma">CASE_lock</span></a>.<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">Notation</span> "lock" := <span class="id" title="var">lock</span> ().<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">unlock</span> () :=<br/>
&nbsp;&nbsp;<span class="id" title="var">lazy_match</span>! <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [|- <a class="idref" href="DlStalk.Tactics.html#MARK"><span class="id" title="inductive">MARK</span></a> <a class="idref" href="DlStalk.Tactics.html#CASE_lock_str"><span class="id" title="definition">CASE_lock_str</span></a> <span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">apply</span> <a class="idref" href="DlStalk.Tactics.html#MARK_"><span class="id" title="constructor">MARK_</span></a><br/>
&nbsp;&nbsp;| [|-<span class="id" title="var">_</span>] ⇒ ()<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">mk_int_ident</span> (<span class="id" title="var">base</span> : <span class="id" title="var">string</span>) (<span class="id" title="var">i</span> : <span class="id" title="var">int</span>) : <span class="id" title="var">ident</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">i</span> := <span class="id" title="var">Message.to_string</span> (<span class="id" title="var">Message.of_int</span> <span class="id" title="var">i</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">str</span> := <span class="id" title="var">String.app</span> <span class="id" title="var">base</span> <span class="id" title="var">i</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">Ident.of_string</span> <span class="id" title="var">str</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">Some</span> <span class="id" title="var">id</span> ⇒ <span class="id" title="var">id</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">None</span> ⇒ <span class="id" title="var">throw</span> (<span class="id" title="var">Tactic_failure</span> (<span class="id" title="var">Some</span> (<span class="id" title="var">Message.of_string</span> (<span class="id" title="var">String.app</span> "Failed to make id: " <span class="id" title="var">str</span>))))<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">mk_case_ident</span> (<span class="id" title="var">i</span> : <span class="id" title="var">int</span>) : <span class="id" title="var">ident</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">mk_int_ident</span> "CASE_GUARDED__________________" <span class="id" title="var">i</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">mk_rem_ident</span> (<span class="id" title="var">i</span> : <span class="id" title="var">int</span>) : <span class="id" title="var">ident</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">mk_int_ident</span> "CASE_GUARDED_REM__________________" <span class="id" title="var">i</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">check_case</span> (<span class="id" title="var">i</span> : <span class="id" title="var">int</span> <span class="id" title="var">option</span>) (<span class="id" title="var">p</span> : <span class="id" title="tactic">pattern</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">c'</span> := <span class="id" title="var">hyp</span> (<span class="id" title="var">mk_case_ident</span> (<span class="id" title="var">Option.default</span> 0 <span class="id" title="var">i</span>)) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span>! <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">h</span> : <a class="idref" href="DlStalk.Tactics.html#MARK"><span class="id" title="inductive">MARK</span></a> <a class="idref" href="DlStalk.Tactics.html#CASE_remember_str"><span class="id" title="definition">CASE_remember_str</span></a> (?<span class="id" title="var">c</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">v</span>) |- <span class="id" title="var">_</span>] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="var">Constr.equal</span> <span class="id" title="var">c</span> <span class="id" title="var">c'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">matches</span> := <span class="id" title="var">Pattern.matches</span> <span class="id" title="var">p</span> <span class="id" title="var">v</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">List.iter</span> (<span class="id" title="keyword">fun</span> (<span class="id" title="var">i</span>, <span class="id" title="var">v</span>) ⇒ <span class="id" title="var">remember</span> $<span class="id" title="var">v</span> <span class="id" title="keyword">as</span> $<span class="id" title="var">i</span>) <span class="id" title="var">matches</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> $<span class="id" title="var">h</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="tactic">fail</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">Notation</span> "case" <span class="id" title="var">p</span>(<span class="id" title="tactic">pattern</span>) <span class="id" title="var">i</span>(<span class="id" title="var">opt</span>(<span class="id" title="var">seq</span>("as", <span class="id" title="var">tactic</span>))) := <span class="id" title="var">check_case</span> <span class="id" title="var">i</span> <span class="id" title="var">p</span>; <span class="id" title="var">unlock</span> ().<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">switch_</span> (<span class="id" title="var">i</span> : <span class="id" title="var">int</span> <span class="id" title="var">option</span>) (<span class="id" title="var">c</span> : <span class="id" title="keyword">constr</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">lock</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">id</span> := <span class="id" title="var">mk_case_ident</span> (<span class="id" title="var">Option.default</span> 0 <span class="id" title="var">i</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">id_rem</span> := <span class="id" title="var">mk_rem_ident</span> (<span class="id" title="var">Option.default</span> 0 <span class="id" title="var">i</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> $<span class="id" title="var">c</span> <span class="id" title="keyword">as</span> $<span class="id" title="var">id</span> <span class="id" title="var">eqn</span>:$<span class="id" title="var">id_rem</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ih</span> := <span class="id" title="var">hyp</span> <span class="id" title="var">id_rem</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">rewrite</span> $<span class="id" title="var">ih</span> <span class="id" title="tactic">in</span> × );<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DlStalk.Tactics.html#mark_remember"><span class="id" title="lemma">mark_remember</span></a> <span class="id" title="tactic">in</span> $<span class="id" title="var">id_rem</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">Notation</span> "switch" <span class="id" title="var">c</span>(<span class="id" title="keyword">constr</span>) <span class="id" title="var">i</span>(<span class="id" title="var">opt</span>(<span class="id" title="var">seq</span>("as", <span class="id" title="var">tactic</span>))) := <span class="id" title="var">switch_</span> <span class="id" title="var">i</span> <span class="id" title="var">c</span>.<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">Notation</span> "switch" "type" <span class="id" title="var">c</span>(<span class="id" title="keyword">constr</span>) <span class="id" title="var">i</span>(<span class="id" title="var">opt</span>(<span class="id" title="var">seq</span>("as", <span class="id" title="var">tactic</span>))) := <span class="id" title="var">switch_</span> <span class="id" title="var">i</span> (<span class="id" title="var">find_h</span> <span class="id" title="var">c</span> <span class="id" title="var">None</span>).<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">rewrite_hyp</span> (<span class="id" title="var">h</span> : <span class="id" title="var">ident</span>) (<span class="id" title="var">cl</span> : <span class="id" title="var">clause</span> <span class="id" title="var">option</span>) <span class="id" title="var">tac</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">cl</span> := <span class="id" title="var">default_on_concl</span> <span class="id" title="var">cl</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">first</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id" title="var">Std.rewrite</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[{<span class="id" title="var">rew_orient</span> := <span class="id" title="var">None</span>; <span class="id" title="var">rew_repeat</span> := <span class="id" title="var">Precisely</span> 1; <span class="id" title="var">rew_equatn</span> := <span class="id" title="keyword">fun</span> () ⇒ (<span class="id" title="var">hyp</span> <span class="id" title="var">h</span>, <span class="id" title="var">NoBindings</span>)}]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cl</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tac</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="keyword">let</span> {<span class="id" title="var">on_hyps</span>:=<span class="id" title="var">oh</span>;<span class="id" title="var">on_concl</span>:=<span class="id" title="var">oc</span>} := <span class="id" title="var">cl</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Std.setoid_rewrite</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">LTR</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> () ⇒ (<span class="id" title="var">hyp</span> <span class="id" title="var">h</span>, <span class="id" title="var">NoBindings</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">oc</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">None</span>;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">List.iter</span> (<span class="id" title="keyword">fun</span> (<span class="id" title="var">h</span>, <span class="id" title="var">o</span>, <span class="id" title="var">_</span>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Std.setoid_rewrite</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">LTR</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> () ⇒ (<span class="id" title="var">hyp</span> <span class="id" title="var">h</span>, <span class="id" title="var">NoBindings</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">o</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Some</span> <span class="id" title="var">h</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) (<span class="id" title="var">Option.default</span> [] <span class="id" title="var">oh</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;].<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">rec</span> <span class="id" title="var">match_rew</span> (<span class="id" title="var">t0</span> : <span class="id" title="keyword">constr</span>) (<span class="id" title="var">t1</span> : <span class="id" title="keyword">constr</span>) : <span class="id" title="var">unit</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">multi_match</span>! <span class="id" title="var">t1</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="var">unify</span> $<span class="id" title="var">t0</span> $<span class="id" title="var">t1</span><br/>
&nbsp;&nbsp;| ?<span class="id" title="var">f</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">match_rew</span> <span class="id" title="var">t0</span> <span class="id" title="var">f</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">fail</span><br/>
<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">get_rewrite_hyp</span> (<span class="id" title="var">t</span> : <span class="id" title="keyword">constr</span>) : <span class="id" title="var">ident</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">multi_match</span>! <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">h</span> : ?<span class="id" title="var">t'</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">match_rew</span> <span class="id" title="var">t</span> <span class="id" title="var">t'</span>; <span class="id" title="var">h</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">h</span> : <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">t'</span> |- <span class="id" title="var">_</span>] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">match_rew</span> <span class="id" title="var">t</span> <span class="id" title="var">t'</span>; <span class="id" title="var">h</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">h</span> : ?<span class="id" title="var">t'</span> |- <span class="id" title="var">_</span>] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">match_rew</span> <span class="id" title="var">t</span> <span class="id" title="var">t'</span>; <span class="id" title="var">h</span><br/>
<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">hrewrite_</span> (<span class="id" title="var">t</span> : <span class="id" title="keyword">constr</span>) (<span class="id" title="var">cl</span> : <span class="id" title="var">clause</span> <span class="id" title="var">option</span>) <span class="id" title="var">tac</span> : <span class="id" title="var">unit</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">h</span> := <span class="id" title="var">get_rewrite_hyp</span> <span class="id" title="var">t</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">rewrite_hyp</span> <span class="id" title="var">h</span> <span class="id" title="var">cl</span> <span class="id" title="var">tac</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span>2 <span class="id" title="keyword">Notation</span> "hrewrite"<br/>
&nbsp;&nbsp;<span class="id" title="var">t</span>(<span class="id" title="var">open_constr</span>)<br/>
&nbsp;&nbsp;<span class="id" title="var">cl</span>(<span class="id" title="var">opt</span>(<span class="id" title="var">clause</span>))<br/>
&nbsp;&nbsp;<span class="id" title="var">tac</span>(<span class="id" title="var">opt</span>(<span class="id" title="var">seq</span>("by", <span class="id" title="var">thunk</span>(<span class="id" title="var">tactic</span>)))) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">Control.once</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">hrewrite_</span> <span class="id" title="var">t</span> <span class="id" title="var">cl</span> <span class="id" title="var">tac</span>).<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>